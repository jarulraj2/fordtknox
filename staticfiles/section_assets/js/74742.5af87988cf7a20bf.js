!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="3385e3ef-5c45-4c93-bfb6-f422795399ae",e._sentryDebugIdIdentifier="sentry-dbid-3385e3ef-5c45-4c93-bfb6-f422795399ae")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[74742],{74742:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return X}});var l=o(85893),i=o(14354),n=o.n(i),a=o(67294),s=o(50605),r=o(51577),u=o(36776),d=o(67469),c=o(83466),v=o(22690),m=o(97263),_=o(95557),p=o(83872),g=o(14727),h=o(61356),C=o.n(h),b=o(13459),f=o(93967),x=o.n(f),S=o(99244),w=o(61203),k=o(3670),y=o(87554),A=e=>{var t,o;let{data:i,gs:n,locale:s,registerEmail:r,onAuthCodeSuccess:u}=e,d={...C(),...n},[c,m]=(0,a.useState)(!1),[_,p]=(0,a.useState)(""),[h,f]=(0,a.useState)(""),[A,N]=(0,a.useState)(60),{activeToken:E,setActiveToken:R,setRegistrationsOptions:L,registrationsOptions:T}=(0,g.l8)(),j=Array(6).fill(""),[I,M]=(0,a.useState)(""),[O,P]=(0,a.useState)(j),[Y,Z]=(0,a.useState)(""),U=(0,a.useRef)(null),D=O.filter(e=>e),{profile:B}=(0,k.Un)(),G=(0,a.useCallback)(async()=>{if(!(null==D?void 0:D.length)){M((null==i?void 0:i.codeEmptyError)||"");return}if((null==D?void 0:D.length)!==6)return;m(!0),(0,w.RC)({event:"ga4Event",event_name:"lp_button",member_active_status:(null==B?void 0:B.activated)?"active":"not active",event_parameters:{page_group:"reg_sub_pop"},position:"success",button_name:i.buttonText}),(0,w.RC)({event:"ga4Event",event_name:"user_center",event_parameters:{page_group:"login_pop"},position:"activate_card",button_name:i.buttonText});let e=await (0,S.Z)({action:"account",needRecaptcha:!0,locale:s,url:"/api/multipass/account/users/email_validation",method:"POST",body:{activation_code:E,verify_code:D.join("")}}).finally(()=>m(!1));if(e.status>100&&e.status<300)f("success"),p((null==i?void 0:i.authSuccessMessage)||""),L({...T,sendAuthCodeSuccess:!0,button:i.buttonText}),u&&u();else{var t,o,l;(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.error_code)==="104"?u&&u():(null==e?void 0:null===(o=e.data)||void 0===o?void 0:o.error_code)==="142"?M((null==i?void 0:i.incorrectCodeError)||"Invalid verification code."):(null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.error_code)==="154"?M((null==i?void 0:i.expiredCodeMessage)||""):M((null==i?void 0:i.sendEmailErrorMessage)||"")}let n=setTimeout(()=>{f(""),p(""),clearTimeout(n)},5e3)},[D,null==B?void 0:B.activated,i.buttonText,null==i?void 0:i.codeEmptyError,null==i?void 0:i.authSuccessMessage,null==i?void 0:i.incorrectCodeError,null==i?void 0:i.expiredCodeMessage,null==i?void 0:i.sendEmailErrorMessage,s,E,L,T,u]),H=(0,a.useMemo)(()=>{let e=new URL(window.location.href),t="".concat(e.origin).concat(e.pathname);return{...(null==T?void 0:T.memberRegistration)&&{data:{redirect_url:t+"?ref=member_actived"}}}},[null==T?void 0:T.memberRegistration]),{loading:Q,triggerSendValidationEmail:W}=(0,y.N)({email:r,mutationOptions:{onSuccess:e=>{var t;let{active_token:o}=(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.data)||{};R(o),f("success"),p((null==i?void 0:i.sendEmailSuccessMessage)||"");let l=setInterval(()=>{N(e=>e<=0?(clearInterval(l),60):e-1)},1e3)},onError:()=>{f("error"),p((null==i?void 0:i.sendEmailErrorMessage)||"")},onFinally:()=>{let e=setTimeout(()=>{f(""),p(""),clearTimeout(e)},5e3)}},params:H}),J=(0,a.useCallback)(async()=>{r&&await W()},[r]),F=()=>{var e;(null==U?void 0:U.current)&&(null==U||null===(e=U.current)||void 0===e||e.focus())};return(0,a.useEffect)(()=>{(null==T?void 0:T.sendAuthCodeManually)&&J()},[J,null==T?void 0:T.sendAuthCodeManually]),(0,l.jsx)("div",{className:x()(d.registrations_auth_code,{[d.disabled]:c}),children:(0,l.jsxs)("div",{className:x()(d.registrations_wrap,"!pb-12"),children:[(0,l.jsxs)("div",{className:d.registrations_auth_code_title,children:[(0,l.jsx)(b.Z,{className:d.rac_title,html:null==i?void 0:i.authCodeTitle}),(0,l.jsx)(b.Z,{className:d.rac_desc,html:null==i?void 0:null===(t=i.authCodeDesc)||void 0===t?void 0:t.replace("%email%",r)})]}),(0,l.jsxs)("div",{className:d.registrations_auth_code_body,children:[(0,l.jsx)(b.Z,{className:d.rac_enter_code_text,html:null==i?void 0:i.enterActiveCodeText}),(0,l.jsx)("div",{className:d.numberBox,children:O.map((e,t)=>{let o=O.indexOf("")===t;return(0,l.jsxs)("div",{className:x()(d.itemContent,{active:!!e}),onClick:F,children:[e,o&&(0,l.jsx)("span",{className:x()(d.blinking),children:"l"})]},t)})}),(0,l.jsx)("div",{className:d.inputBoxWrap,children:(0,l.jsx)("input",{type:"text",value:Y,onBlur:()=>M(""),onChange:e=>{let t=e.target.value.replace(/[^0-9]/g,"").substr(0,6),o=[...t],l=O.map((e,t)=>o[t]||"");Z(t),P(l)},pattern:"[0-9]*",autoComplete:"one-time-code",inputMode:"numeric",maxLength:6,ref:U})}),I&&(0,l.jsx)(b.Z,{className:d.error,html:I}),(null==i?void 0:i.authCodeContent)&&(0,l.jsx)("ul",{className:d.rac_content,dangerouslySetInnerHTML:{__html:null==i?void 0:i.authCodeContent}})]}),(0,l.jsxs)("div",{className:d.registrations_auth_code_footer,children:[(0,l.jsx)(b.Z,{variant:"inline",className:d.authCodeReceiveText,html:null==i?void 0:i.authCodeReceiveText})," ",A&&60!==A?(0,l.jsx)(b.Z,{variant:"inline",html:null==i?void 0:null===(o=i.retrieveText)||void 0===o?void 0:o.replace("%countdownTime%",A.toString()),className:x()(d.sendAgainText,"!text-eufy-color")}):(0,l.jsx)(b.Z,{variant:"inline",onClick:J,className:x()(d.sendAgainText,{"pointer-events-none":Q}),html:null==i?void 0:i.sendAgainText}),c?(0,l.jsx)("button",{className:x()(d.rac_submit,d.registrations_btn,d.flex_center,d.loading_btn),children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,l.jsx)("path",{d:"M1 10C1 14.9706 5.02944 19 10 19C14.9706 19 19 14.9706 19 10C19 5.02944 14.9706 1 10 1",stroke:"white",strokeWidth:"2",strokeLinecap:"round"})})}):(0,l.jsx)("button",{type:"submit",className:x()(d.rac_submit,d.registrations_btn,d.flex_center),onClick:G,children:i.buttonText}),(0,l.jsx)(b.Z,{className:d.note,html:null==i?void 0:i.note})]}),(0,l.jsx)(v.v,{status:h,message:_})]})})},N=o(86602),E=e=>{var t;let{data:o,gs:i,onLoadingAuthState:n}=e,[s,r]=(0,a.useState)((null==o?void 0:o.countDownTime)||5),u={...i};return(0,a.useEffect)(()=>{let e=setInterval(()=>{r(t=>t<=0?(clearTimeout(e),(null==o?void 0:o.countDownTime)||5):t-1)},1e3)},[null==o?void 0:o.countDownTime]),(0,a.useEffect)(()=>{s<=0&&n&&n()},[s,n]),(0,l.jsx)("div",{className:u.registrations_auth_code_success,children:(0,l.jsx)("div",{className:"relative mx-6 rounded-2xl bg-white p-4 min-l:mx-0 min-l:min-w-[400px]",children:(0,l.jsxs)("div",{className:"pt-8 text-center",children:[(0,l.jsx)("div",{className:"mx-auto h-[64px] w-[64px]",children:(0,l.jsx)(N.Z,{iconKey:"rightSuccess",width:64,height:64})}),(0,l.jsx)(b.Z,{className:"mt-4 text-[20px] font-bold leading-[1.2] text-[#333]",html:null==o?void 0:o.title}),(0,l.jsx)(b.Z,{className:"mt-2 text-[14px] font-semibold leading-[1.4] text-[#999] [&_span]:text-[#FAAD15]",html:null==o?void 0:null===(t=o.subtitle)||void 0===t?void 0:t.replace("%time%",null==s?void 0:s.toString())})]})})})},R=e=>{let{data:t,onClose:o,gs:i,locale:h,pageType:C,globalCountry:b,showGoogleLoginCoupon:f,googleLoginCoupons:x}=e,{registrationsModelStatus:S,registrationsOptions:w}=(0,g.l8)(),[y,N]=(0,a.useState)(S||_.hY.MAIN);(0,a.useEffect)(()=>{N(S||_.hY.MAIN)},[S]);let[R,T]=(0,a.useState)([]),[j,I]=(0,a.useState)(""),[M,O]=(0,a.useState)(""),[P,Y]=(0,a.useState)(""),[Z,U]=(0,a.useState)(""),[D,B]=(0,a.useState)(!1),[G,H]=(0,a.useState)(""),Q={...n(),...i},{profile:W}=(0,k.Un)();(0,a.useEffect)(()=>{(null==W?void 0:W.email)&&O(null==W?void 0:W.email)},[null==W?void 0:W.email]);let J=(0,a.useCallback)(e=>{O(e),N(_.hY.QUICK_LOGIN)},[]),F=(0,a.useCallback)(e=>{N(_.hY.MAIN),I(e)},[]),K=(0,a.useCallback)(e=>{U(e),N(_.hY.REMAINDER)},[]),V=(0,a.useCallback)(e=>{Y(e),N(_.hY.PASSWORD_LOGIN)},[]),q=(0,a.useCallback)((e,t,o)=>{let{coupons:l}=e.data;if(T(l),O(t),null==w?void 0:w.memberRegistration){N(_.hY.AUTH_CODE);return}B(o),N("us"===h?_.hY.SUBSCRIBE_SMS:_.hY.COUPONS)},[h]),$=(0,a.useCallback)((e,t)=>{if(O(t),422===e.status){if(null==w?void 0:w.memberRegistration){N(_.hY.PASSWORD_LOGIN);return}N(_.hY.QUICK_LOGIN)}},[w]),z=(0,a.useCallback)(()=>{if((null==W?void 0:W.activated)===!1)try{localStorage&&(localStorage.userActivedFlag=JSON.stringify({href:window.location.href,activated:!1}))}catch(e){}},[null==W?void 0:W.activated]);return(0,a.useEffect)(()=>{f&&x&&(T(x),N(_.hY.COUPONS))},[x,f]),(0,l.jsx)("div",{"aria-label":"modal",className:Q.registrations_model,"aria-labelledby":"registrations-model","aria-describedby":"registrations-model",children:(0,l.jsxs)("div",{className:Q.registrations_model_wrap,children:[(0,l.jsx)("button",{tag:"Auto-100006425",className:Q.rsm_close,children:(0,l.jsx)(L,{onClose:()=>o(y)})}),y===_.hY.MAIN&&(0,l.jsx)(s.Z,{data:{...null==t?void 0:t.registrationsMain,globalCountry:b},pageType:C,gs:i,onSendVerifyEmailSuccess:()=>{H("main"),N(_.hY.ACTIVATE)},registrationsFillEmail:j,onQuickLogin:J,onRegistrationsSuccess:q,onRegistrationsError:$,onRegistrationsVerify:e=>{O(e)}}),y===_.hY.QUICK_LOGIN&&(0,l.jsx)(r.Z,{fillEmail:M,data:null==t?void 0:t.registrationsQuickLogin,gs:i,onPasswordLogin:V,onQuickLoginSuccess:K,onCreateAccount:F,onQuickLoginBack:()=>{p.Z.backRegistrationsTrack({buttonName:"back"}),N(_.hY.MAIN),I(M)}}),y===_.hY.PASSWORD_LOGIN&&(0,l.jsx)(u.Z,{rsqlFillEmail:P,onPasswordLoginSuccess:()=>o(),data:null==t?void 0:t.registrationsPasswordLogin,gs:i,onPasswordLoginBack:()=>N(_.hY.QUICK_LOGIN),onSendVerifyEmailSuccess:e=>{O(e),H("passwordLogin"),N(_.hY.ACTIVATE)}}),y===_.hY.COUPONS&&(0,l.jsx)(d.Z,{data:null==t?void 0:t.registrationsCoupons,gs:i,registerEmail:M,coupons:R,onCouponsGet:()=>o(y),onCouponsBack:()=>N(_.hY.MAIN),showGoogleLoginCoupon:f}),y===_.hY.REMAINDER&&(0,l.jsx)(c.Z,{data:null==t?void 0:t.registrationsRemainder,gs:i,rsrFillEmail:Z,onReminderBack:()=>{O(Z),I(""),N(_.hY.QUICK_LOGIN)},onReminderGet:()=>o()}),y===_.hY.SUBSCRIBE_SMS&&(0,l.jsx)(m.Z,{data:null==t?void 0:t.registrationsSubscribeSMS,gs:i,subscribe:D,registerEmail:M,onSubscribeSMSSkip:()=>{N(_.hY.COUPONS)},onSubscribeSMSSuccess:()=>{N(_.hY.COUPONS)},onActivateGet:()=>o()}),y===_.hY.ACTIVATE&&(0,l.jsx)(v.Z,{data:null==t?void 0:t.registrationsActivate,gs:i,registerEmail:M,onActivateBack:()=>{N("main"===G?_.hY.MAIN:_.hY.PASSWORD_LOGIN),I(M)},onActivateGet:()=>o()}),y===_.hY.ACTIVATE_NO_BACK_BTN&&(0,l.jsx)(v.Z,{data:null==t?void 0:t.registrationsActivate,gs:i,registerEmail:M,onActivateGet:()=>o(),hideBackBtn:!0}),y===_.hY.AUTH_CODE&&(0,l.jsx)(A,{data:null==t?void 0:t.registrationsAuthCode,gs:i,locale:h,registerEmail:M,onAuthCodeSuccess:()=>{z(),N(_.hY.AUTH_CODE_SUCCESS)}}),y===_.hY.AUTH_CODE_SUCCESS&&(0,l.jsx)(E,{data:null==t?void 0:t.registrationsAuthCodeSuccess,gs:i,onLoadingAuthState:()=>o(_.hY.AUTH_CODE_SUCCESS)})]})})};let L=e=>{let{onClose:t}=e;return(0,l.jsx)("svg",{onClick:t,xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",children:(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.8525 5.31015C16.4558 4.91337 15.8125 4.91338 15.4157 5.31015L11.1268 9.5991L6.83815 5.31049C6.44138 4.91372 5.79808 4.91372 5.40131 5.31049C5.00454 5.70726 5.00455 6.35055 5.40131 6.74732L9.68993 11.0359L5.40105 15.3248C5.00428 15.7216 5.00428 16.3649 5.40105 16.7616C5.79782 17.1584 6.44111 17.1584 6.83788 16.7616L11.1268 12.4728L15.416 16.762C15.8128 17.1588 16.456 17.1588 16.8528 16.762C17.2496 16.3652 17.2496 15.7219 16.8528 15.3252L12.5636 11.0359L16.8525 6.74698C17.2493 6.35021 17.2493 5.70692 16.8525 5.31015ZM16.921 6.02856C16.921 6.22992 16.8441 6.43127 16.6905 6.5849L14.465 8.8104L12.2395 11.0359L12.2395 11.0359L16.6905 6.58493C16.8441 6.43129 16.921 6.22993 16.921 6.02856ZM5.34966 6.19087C5.37992 6.3354 5.45115 6.47307 5.56336 6.58528L10.014 11.0359L10.014 11.0359L5.56336 6.58524C5.45116 6.47304 5.37992 6.33539 5.34966 6.19087ZM5.34682 16.1923C5.37547 16.3415 5.44757 16.484 5.56309 16.5996C5.87037 16.9068 6.36856 16.9068 6.67583 16.5996L11.1268 12.1486L15.578 16.5999C15.8853 16.9072 16.3835 16.9072 16.6908 16.5999C16.8462 16.4445 16.923 16.2402 16.9212 16.0365C16.923 16.2402 16.8462 16.4445 16.6908 16.5999C16.3835 16.9072 15.8853 16.9072 15.578 16.5999L11.1268 12.1487L6.67583 16.5996C6.36856 16.9069 5.87037 16.9069 5.56309 16.5996C5.44756 16.4841 5.37547 16.3415 5.34682 16.1923Z",fill:"#333333"})})};var T=o(5539),j=o.n(T),I=o(83350),M=o(13408),O=o(11163),P=o(36808),Y=o.n(P),Z=o(56875),U=o(36413),D=o(25362),B=o(73138),G=o(14466),H=o.n(G),Q=o(54450),W=o(58509),J=o(28761),F=e=>{let{children:t,onClose:o,className:i,rootClassName:n,closeClassName:s,iconClassName:r,closeStrokeColor:u="currentColor",locked:d=!0}=e,c=(0,a.useRef)(),v=(0,a.useCallback)(e=>{if("Escape"===e.key)return o()},[o]);return(0,a.useEffect)(()=>{let e=c.current;return e&&d&&((0,W.Qp)(e,{reserveScrollBarGap:!0}),window.addEventListener("keydown",v)),()=>{(0,W.tP)(),window.removeEventListener("keydown",v)}},[v,d]),(0,l.jsx)("div",{className:(0,J.cn)(H().root,n),children:(0,l.jsxs)("div",{className:(0,J.cn)(H().modal,i),role:"dialog",ref:c,children:[(0,l.jsx)("button",{onClick:()=>o(),"aria-label":"Close panel",className:(0,J.cn)(H().close,s),children:(0,l.jsx)(Q.Z,{stroke:u,className:(0,J.cn)("h-[22px] w-[22px]",r)})}),(0,l.jsx)("div",{children:t})]})})},K=o(54987);let V=D.ZP.create(e=>{let{options:t,cart:o,title:i,content:n,cancelBtn:s="cancel",confirmBtn:r="confirm",cancelUrl:u,confirmUrl:d,memberType:c,monthly:v,annual:m}=e,_=(0,D.dd)(),{query:p,route:h}=(0,O.useRouter)(),{registrationsOptions:C}=(0,g.l8)(),b=(0,a.useMemo)(()=>{switch(h){case"/":return"Home Page";case"/[...pages]":var e;return"Activity Page_".concat(null===(e=p.pages)||void 0===e?void 0:e[0]);case"/products/[slug]":return"Product Detail Page_".concat(p.slug);default:return""}},[p.pages,p.slug,h]),f=(0,a.useMemo)(()=>{let e,o;return e="memberCannotSuperposed"===t?1===c?v:m:1===c?m:v,o=1===c?v:m,n.replace("${currentMember}",e||"").replace("${purchaseMember}",o||"")},[m,n,c,v,t]),x=()=>{if(d){var e,t;(0,w.RC)({event:"ga4Event",event_name:"begin_checkout",event_parameters:{page_group:b},position:(null==C?void 0:C.checkout)?"Cart Checkout":"Card Pop Up",button_name:null==C?void 0:C.button,currency:null==o?void 0:null===(e=o.currency)||void 0===e?void 0:e.code,value:null==o?void 0:o.totalPrice,items:null==o?void 0:null===(t=o.lineItems)||void 0===t?void 0:t.map(e=>{var t,o,l,i,n,a,s,r,u;return{item_id:null===(t=e.variant)||void 0===t?void 0:t.sku,item_name:null===(o=e.product)||void 0===o?void 0:o.title,item_brand:"anker",item_variant:e.variant.name,price:e.totalAmount,quantity:1|e.quantity,image_url:(null==e?void 0:null===(i=e.variant)||void 0===i?void 0:null===(l=i.image)||void 0===l?void 0:l.url)||(null==e?void 0:null===(s=e.product)||void 0===s?void 0:null===(a=s.images)||void 0===a?void 0:null===(n=a[0])||void 0===n?void 0:n.url),item_category_id:w.Hc[(0,w.wJ)(null==e?void 0:null===(r=e.product)||void 0===r?void 0:r.tags)]||222,item_variant_id:(0,Z.Ll)(null===(u=e.variant)||void 0===u?void 0:u.id)}})}),location.href=d}_.remove()},S=()=>{u&&(location.href=u),_.remove()},k=()=>{u&&(location.href=u),_.remove()};return(0,l.jsx)(F,{className:"w-[92vw] max-w-[540px]",onClose:()=>k(),children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("h3",{className:"text-2xl font-extrabold !leading-[1.2] text-[#2d2d2d]",dangerouslySetInnerHTML:{__html:i}}),(0,l.jsx)("p",{className:"mt-3 text-base font-semibold !leading-[1.2] text-[#333]",dangerouslySetInnerHTML:{__html:f}}),"memberCannotSuperposed"===t?(0,l.jsx)("div",{className:"mt-6",children:(0,l.jsx)(K.Z,{className:" min-w-[151px] !bg-[#333]",onClick:()=>x(),children:r})}):(0,l.jsxs)("div",{className:"mt-6 flex gap-6",children:[(0,l.jsx)(K.Z,{variant:"secondary",className:"w-1/2",onClick:()=>S(),children:s}),(0,l.jsx)(K.Z,{className:"w-1/2 !bg-[#333]",onClick:()=>x(),children:r})]})]})})});var q=o(85021),$=o(15109);let z={us:"US",ca:"CA","eu-de":"DE","eu-en":"AT",uk:"GB",nl:"LU",fr:"FR","eu-it":"IT","eu-es":"ES","cz-en":"CZ"};var X=e=>{let{registrations:t,showRegistrationsPopup:o,path:i,pathname:n,registrationsModalMetafields:s,pageType:r,globalCountry:u,showGoogleIdentity:d,memberSetting:c={}}=e,{data:v}=(0,I.Z)(),{locale:m,query:h,route:C}=(0,O.useRouter)(),b=(0,a.useMemo)(()=>v?null==v?void 0:v.email:"",[v]),[f,x]=(0,a.useState)(!1),{registrationsOptions:y,setRegistrationsPopup:A,leftBarShow:N,recaptchaReady:E,setRegistrationsModelStatus:L}=(0,g.l8)(),[T,P]=(0,a.useState)(!1),[G,H]=(0,a.useState)(!1),[Q,W]=(0,a.useState)([]),{profile:J,isFinish:F}=(0,k.Un)(),K=(0,a.useRef)();K.current=(0,D.dd)(B.Z);let X=(0,a.useRef)();X.current=(0,D.dd)(V),(0,a.useEffect)(()=>{P("true"===(0,Z.Tb)("isNew"))},[]);let ee=(0,a.useMemo)(()=>(0,_.PO)(m),[m]),et=(0,a.useCallback)(async()=>{let{register_source:e}=(0,U.m1)(),t=await (0,S.Z)({action:"activity",needRecaptcha:!0,locale:m,url:"/api/multipass/rainbowbridge/activities",method:"POST",headers:{},body:{email:b,register_source:e,shopify_domain:M.BR["".concat(m)],single_brand_subscribe:!0,genre:"anker_register_and_subscribe",promise_subscribe:!1,sub_brand_type:(()=>{switch(r){case"powerStation":case"hes":return"anker_ankersolix";case"charger":return"anker_charging"}})()}});if(!t.errors){let e=(null==t?void 0:t.coupons)||[],o=(null==t?void 0:t.coupon)||{};W(e.length?e:[o]),H(!0);let l=new URL(location.href);l.searchParams.delete("isNew"),history.replaceState({},"",l.toString())}},[b,m,r]);(0,a.useEffect)(()=>{d&&T&&b&&E&&et()},[et,b,T,E,d]);let eo=(0,a.useCallback)(e=>{switch(e){case _.hY.QUICK_LOGIN:p.Z.closeTrack({position:"",page_group:"login_pop",button_name:"close"});break;case _.hY.REMAINDER:case _.hY.MAIN:p.Z.closeTrack({position:"",page_group:"reg_sub_pop",button_name:"close"});break;case _.hY.PASSWORD_LOGIN:p.Z.closeTrack({position:"",page_group:"login_pop",button_name:"close"});break;case _.hY.COUPONS:if(p.Z.closeTrack({position:"success",page_group:"reg_sub_pop",button_name:"close"}),G){H(!1),A(!1),x(!1);return}let t=window.location.host.split("."),o=window.location.host.includes("localhost")?"localhost":".".concat(t[1],".").concat(t[2]);Y().get("passport-theme-url")&&Y().remove("passport-theme-url",{domain:o,expires:30}),window.location.href="".concat(M.n1,"/login?app=").concat((0,_.PO)(m),"&redirect=").concat(encodeURIComponent(location.href));break;case _.hY.AUTH_CODE:case _.hY.AUTH_CODE_SUCCESS:p.Z.closeTrack({position:"success",page_group:"reg_sub_pop",button_name:"close"})}A(!1),x(!1)},[m,A,G]),el=(0,a.useMemo)(()=>{let e=!1;if((null==s?void 0:s.collections_handles)&&(null==i?void 0:i.includes("collections"))){let t=i.toLowerCase().split("/");for(let o of null==s?void 0:s.collections_handles){let l=!1;for(let e of t)if(l=e.toLowerCase()===o.toLowerCase())break;if(e=!!o&&l)break}}if((null==s?void 0:s.blogs_handles)&&(null==i?void 0:i.includes("blogs"))){let t=i.toLowerCase().split("/");for(let o of s.blogs_handles){if("home"===o&&"/blogs"===n)e=!0;else{let l=!1;for(let e of t)if(l=e.toLowerCase()===o.toLowerCase())break;e=!!o&&l}if(e)break}}if((null==s?void 0:s.pages_handles)&&"/[...pages]"===n){let t=i.toLowerCase().split("/");for(let o of null==s?void 0:s.pages_handles){let l=!1;for(let e of t)if(l=e.toLowerCase()===o.toLowerCase())break;if(e=!!o&&l)break}}if((null==s?void 0:s.handles)&&(null==i?void 0:i.includes("products"))){let t=i.toLowerCase().split("/");for(let o of null==s?void 0:s.handles){let l=!1;for(let e of t)if(l=e.toLowerCase()===o.toLowerCase())break;if(e=!!o&&l)break}}return((null==s?void 0:s.chgIndex)&&"/"===i||(null==s?void 0:s.ppsIndex)&&"/anker-solix"===i)&&(e=!0),(null==s?void 0:s.storeFrontIndex)===!1&&(e=!1),e},[s,i,n]),ei=(0,a.useCallback)((e,t,o,l)=>{let i={value:t,expiry:new Date().getTime()+o,timestamp:o};Y().set(e,i,{domain:l,expires:30})},[]),en=(0,a.useCallback)((e,t)=>{let o=Y().get(e);if(!o)return null;let l=JSON.parse(o);return new Date().getTime()>l.expiry?(Y().remove(e,{domain:t,expires:30}),null):l},[]),ea=(0,a.useCallback)(async()=>{try{var e,t;let o=await (0,S.Z)({url:"/api/multipass/subsrv/v1/prime/member/info",body:{brand:M.cg},locale:m,headers:{},repeatKey:"",type:""}),l=null==o?void 0:null===(t=o.data)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.list,i=null==l?void 0:l.some(e=>1===e.prime_type&&e.status),n=null==l?void 0:l.some(e=>2===e.prime_type&&e.status);return{isMonthlyPlus:i,isAnnualPlus:n}}catch(e){}return{isMonthlyPlus:!1,isAnnualPlus:!1}},[m]),es=(0,a.useCallback)((e,t,o,l,i)=>{var n,a,s,r,u,d;K.current.hide(),X.current.show({options:e,cart:i,title:null==c?void 0:null===(n=c[e])||void 0===n?void 0:n.title,content:null==c?void 0:null===(a=c[e])||void 0===a?void 0:a.content,confirmBtn:null==c?void 0:null===(s=c[e])||void 0===s?void 0:s.confirmBtn,confirmUrl:t,memberType:l||((null==y?void 0:y.monthlyPlus)?1:2),monthly:null==c?void 0:null===(r=c.memberSuperposed)||void 0===r?void 0:r.monthly,annual:null==c?void 0:null===(u=c.memberSuperposed)||void 0===u?void 0:u.annual,cancelUrl:o,..."memberSuperposed"===e&&{cancelBtn:null==c?void 0:null===(d=c.memberSuperposed)||void 0===d?void 0:d.cancelBtn}})},[c,null==y?void 0:y.monthlyPlus]),er=(0,a.useMemo)(()=>{switch(C){case"/":return"Home Page";case"/[...pages]":var e;return"Activity Page_".concat(null===(e=h.pages)||void 0===e?void 0:e[0]);case"/products/[slug]":return"Product Detail Page_".concat(h.slug);default:return""}},[h.pages,h.slug,C]),eu=(0,a.useCallback)(e=>{var t,o;let{cart:l}=e;(0,w.RC)({event:"ga4Event",event_name:"begin_checkout",event_parameters:{page_group:er},position:(null==y?void 0:y.checkout)?"Cart Checkout":"Card Pop Up",button_name:null==y?void 0:y.button,currency:null==l?void 0:null===(t=l.currency)||void 0===t?void 0:t.code,value:null==l?void 0:l.totalPrice,items:null==l?void 0:null===(o=l.lineItems)||void 0===o?void 0:o.map(e=>{var t,o,l,i,n,a,s,r;return{item_id:null===(t=e.variant)||void 0===t?void 0:t.sku,item_name:null===(o=e.product)||void 0===o?void 0:o.title,item_brand:"anker",item_variant:e.variant.name,price:e.totalAmount,quantity:1|e.quantity,image_url:(null==e?void 0:null===(l=e.variant.image)||void 0===l?void 0:l.url)||(null==e?void 0:null===(a=e.product)||void 0===a?void 0:null===(n=a.images)||void 0===n?void 0:null===(i=n[0])||void 0===i?void 0:i.url),item_category_id:w.Hc[(0,w.wJ)(null==e?void 0:null===(s=e.product)||void 0===s?void 0:s.tags)]||222,item_variant_id:(0,Z.Ll)(null==e?void 0:null===(r=e.variant)||void 0===r?void 0:r.id)}})})},[er,null==y?void 0:y.button,null==y?void 0:y.checkout]),ed=(0,a.useRef)(!1),ec=(0,a.useCallback)(async()=>{if(ed.current)return;ed.current=!0;let{loginRedirectUrl:e,monthlyPlus:t,annualPlus:o,sendAuthCodeSuccess:l,cart:i}=y||{},n=null==i?void 0:i.id,a=null==n?void 0:n.split("?key=")[1],s=null==n?void 0:n.split("?key=")[0].split("gid://shopify/Cart/")[1],r="".concat(M.n1,"/login?app=").concat(ee,"&redirect=").concat(encodeURIComponent(location.href));if(!e&&r){Y().remove("passport-login-url",{domain:d,expires:30}),window.location.href=r;return}let u=window.location.host.split("."),d=window.location.host.includes("localhost")?"localhost":".".concat(u[1],".").concat(u[2]),{isMonthlyPlus:c,isAnnualPlus:v}=await ea(),_=await (0,$.d)({locale:m,id:n}),p=(null==_?void 0:_.customAttributes)||[];p.find(e=>{if("_checkout_delivery_custom"===e.key){let t=JSON.parse(e.value||"{}");t.is_prime=c||v,e.value=JSON.stringify(t)}});let g=null==J?void 0:J.token;p=(0,Z.vB)([...p,{key:"_login_user",value:"1"},{key:"_last_url",value:location.href},{key:"_token",value:g}],"key"),await (0,q.S)(m,p,n).catch(e=>console.error("cartAttributesUpdateFn",e));let h=new URL(r||e);if(e){let t=new URL(e);l&&t.searchParams.set("ref","activate_member"),r&&(h.searchParams.set("redirect",t.toString()),h.searchParams.set("cartKey",a),h.searchParams.set("cartSecret",s))}if(ed.current=!1,t&&c||o&&v){es("memberCannotSuperposed",r,r,t?1:2,_);return}if((null==y?void 0:y.monthlyPlus)&&v||(null==y?void 0:y.annualPlus)&&c){es("memberSuperposed",h.toString(),r,t?1:2,_);return}Y().remove("passport-login-url",{domain:d,expires:30}),window.location.href=h.toString(),eu({cart:_})},[ea,m,y,es,null==J?void 0:J.token,ee,eu]),ev=(0,a.useCallback)(async()=>{let e=Y().get("login-redirect-member");if(!e)return;let{loginRedirectUrl:t,monthlyPlus:o,annualPlus:l,cartId:i}=JSON.parse(e),n=await (0,$.d)({locale:m,id:i});(0,Z.nJ)("login-redirect-member");let{activated:a,isMonthlyPlus:s,isAnnualPlus:r}=J,u=(null==n?void 0:n.customAttributes)||[];u.find(e=>{if("_checkout_delivery_custom"===e.key){let t=JSON.parse(e.value||"{}");t.is_prime=s||r,e.value=JSON.stringify(t)}});let d=null==J?void 0:J.token;if(u=(0,Z.vB)([...u,{key:"_login_user",value:"1"},{key:"_last_url",value:location.href},{key:"_token",value:d}],"key"),await (0,q.S)(m,u,i),!a){A(!0),L(_.hY.AUTH_CODE);return}if(o&&s||l&&r){es("memberCannotSuperposed",void 0,void 0,o?1:2);return}if(eu({cart:n}),o&&r||l&&s){es("memberSuperposed",t,void 0,o?1:2);return}s||r||(location.href=t)},[m,J,eu,A,L,es]);(0,a.useEffect)(()=>{F&&J&&ev()},[F,J,ev]),(0,a.useEffect)(()=>{var e;let t;let l=window.location.host.split("."),i=window.location.host.includes("localhost")?"localhost":".".concat(l[1],".").concat(l[2]),a=en("".concat(null==z?void 0:z[m],"_registrations_pop_up"),i);o&&p.Z.pvTrack();let r=(0,U.pm)(),u=null==s?void 0:null===(e=s.condition_display)||void 0===e?void 0:e.find(e=>n===(null==e?void 0:e.handle));if(t=r[null==u?void 0:u.params]&&r[null==u?void 0:u.params]===(null==u?void 0:u.value),!a||t){let e=setTimeout(()=>{(!b&&el||t)&&(p.Z.pvTrack(),x(!0),ei("".concat(null==z?void 0:z[m],"_registrations_pop_up"),!0,12096e5,i)),clearTimeout(e)},1e4)}let d=Y().get("passport-login-url");(d||(null==y?void 0:y.sendAuthCodeSuccess))&&((null==y?void 0:y.loginRedirectUrl)&&((null==J?void 0:J.activated)||(null==y?void 0:y.sendAuthCodeSuccess))?ec():!o&&d&&(K.current.show(),window.location.href=d,Y().remove("passport-login-url",{domain:i,expires:30})))},[b,en,m,ec,null==J?void 0:J.activated,null==y?void 0:y.loginRedirectUrl,null==y?void 0:y.sendAuthCodeSuccess,ei,el,o,n,null==s?void 0:s.condition_display]);let em=(0,a.useMemo)(()=>o||!b&&f||G,[o,b,f,G]);return(0,a.useEffect)(()=>{em?document.querySelector("html").classList.add("fw-hidden"):N||document.querySelector("html").classList.remove("fw-hidden")},[em,N]),em&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{"aria-label":"mask",className:j().rsm_close_mask}),(0,l.jsx)(R,{onClose:eo,gs:j(),locale:m,pageType:r,data:t,globalCountry:u,showGoogleLoginCoupon:G,googleLoginCoupons:Q})]})}},61356:function(e){e.exports={rac_title:"RegistrationsAuthCode_rac_title__Sik1o",rac_desc:"RegistrationsAuthCode_rac_desc__OVpVw",rac_enter_code_text:"RegistrationsAuthCode_rac_enter_code_text__JY0CR",numberBox:"RegistrationsAuthCode_numberBox__WoxUG",itemContent:"RegistrationsAuthCode_itemContent__00gpQ",inputBoxWrap:"RegistrationsAuthCode_inputBoxWrap__JtqQG",rac_content:"RegistrationsAuthCode_rac_content__x9tuK",registrations_auth_code_footer:"RegistrationsAuthCode_registrations_auth_code_footer__TWpM6",authCodeReceiveText:"RegistrationsAuthCode_authCodeReceiveText__QSjte",sendAgainText:"RegistrationsAuthCode_sendAgainText__p_mle",rac_submit:"RegistrationsAuthCode_rac_submit__WrIY6",note:"RegistrationsAuthCode_note__ZE0kp",error:"RegistrationsAuthCode_error__rZOdo",blinking:"RegistrationsAuthCode_blinking__QMATh",blink:"RegistrationsAuthCode_blink__IpqFV"}},14354:function(e){e.exports={registrations_model:"RegistrationsModel_registrations_model__5DjjT",rsm_close:"RegistrationsModel_rsm_close__W_ETA",registrations_model_wrap:"RegistrationsModel_registrations_model_wrap___xfcM"}},14466:function(e){e.exports={root:"Dialog_root___lsE3",modal:"Dialog_modal__NndBi",close:"Dialog_close__71ESo"}}}]);