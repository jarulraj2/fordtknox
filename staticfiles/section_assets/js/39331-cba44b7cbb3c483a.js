!function(){try{var s="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=(new s.Error).stack;e&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[e]="d09a1a7a-478d-460b-b845-374fbdb2d4ff",s._sentryDebugIdIdentifier="sentry-dbid-d09a1a7a-478d-460b-b845-374fbdb2d4ff")}catch(s){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[39331],{50605:function(s,e,i){"use strict";var t=i(85893),r=i(36842),a=i(13459),n=i(82328),o=i.n(n),l=i(93967),_=i.n(l),c=i(87536),d=i(83999),u=i(67294),b=i(99244),m=i(11163),g=i(36413),p=i(13408),h=i(83872),x=i(95557),v=i(14727),f=i(65040),S=i(87554);let y=["us","ca"];e.Z=s=>{var e,i,n,l,k,R,j;let{data:w,registrationsFillEmail:M,gs:N,onQuickLogin:C,onRegistrationsSuccess:E,onRegistrationsError:T,onSendVerifyEmailSuccess:A,onRegistrationsVerify:I,pageType:O,mainStandard:L=!1,autoSignUpSuccessCallBack:U}=s,{registrationsDealsType:Z,fbqTrack:P,setActiveToken:F}=(0,v.l8)(),{setHtmlRelativeLink:D}=(0,f.D)(),[W,B]=(0,u.useState)(!1),[q,H]=(0,u.useState)(!0),[K,Q]=(0,u.useState)(!1),[V,z]=(0,u.useState)(!0),G={...o(),...N},{locale:Y}=(0,m.useRouter)(),{register:J,handleSubmit:X,getValues:$,clearErrors:ss,formState:{errors:se}}=(0,c.cI)({shouldFocusError:!1,defaultValues:{registrations:{email:M}}}),si=(0,u.useMemo)(()=>(0,x.PO)(Y),[Y]),{loading:st,triggerSendValidationEmail:sr}=(0,S.N)({email:null==V?void 0:V.registrations,mutationOptions:{onSuccess:()=>{A&&A()}}}),sa=(0,u.useCallback)(async()=>{st||await sr()},[sr,st]),sn=(0,u.useCallback)(()=>{ss("registrations[email]"),Q(!1)},[ss]);(0,u.useCallback)(()=>{let s=window.location.host.split(".");return location.href.includes("localhost")?"localhost":".".concat(s[1],".").concat(s[2])},[]);let so=(0,u.useMemo)(()=>y.includes(Y),[Y]),sl=(0,u.useCallback)(async s=>{B(!0),z(s);let{email:e,subscribe:i}=null==s?void 0:s.registrations,t=await (0,b.Z)({action:"login",needRecaptcha:!0,locale:Y,url:"/api/multipass/passport-api/auto-signup",method:"POST",type:"json",body:{email:e,app:si,country_code:Y}}).catch(s=>{B(!1)}),{register_source:r}=(0,g.m1)();if(t.status>100&&t.status<300){var a,n,o;let{canAutoSignup:s,active_token:l}=null==t?void 0:null===(a=t.data)||void 0===a?void 0:a.data;if(h.Z.registrationsTrack({action:"success",subscribe:i?1:0,email:e,deals_type:null==w?void 0:w.dealsType,fbqTrack:P}),U&&U(t),H(s),s){F(l);let s=await (0,b.Z)({action:"activity",needRecaptcha:!0,locale:Y,url:"/api/multipass/rainbowbridge/activities",method:"POST",headers:{"X-Application-Name":"".concat(si,"-shopify"),"x-application-token":null==t?void 0:null===(o=t.data)||void 0===o?void 0:null===(n=o.data)||void 0===n?void 0:n.auth_token},body:{email:e,register_source:r,shopify_domain:p.BR["".concat(Y)],single_brand_subscribe:!0,genre:Z||(null==w?void 0:w.dealsType),promise_subscribe:i,sub_brand_type:(()=>{switch(O){case"powerStation":case"hes":return"anker_ankersolix";case"charger":return"anker_charging"}})()}}).finally(()=>B(!1));!s.errors&&E&&E(s,e,i)}else I&&I(e),B(!1)}else B(!1),Q(!0),T&&T(t,e),422===t.status&&Q(!1)},[I,Y,w,E,T,si,Z,P,O,F]);return(0,t.jsxs)("registrations-main",{class:_()(G.registrations_main,{[G.disabled]:W}),children:[(0,t.jsxs)("div",{className:G.registrations_model_head,children:[(0,t.jsx)(r.Z,{source:"".concat(null==w?void 0:w.img_banner_pc,", ").concat(null==w?void 0:w.img_banner_mob," 1024"),className:"aspect-h-[256] aspect-w-[358] w-full min-l:aspect-h-[328] min-l:aspect-w-[540]"}),(0,t.jsx)(a.Z,{html:null==w?void 0:w.title,className:_()(G.registrations_title,G.rsm_title)})]}),(0,t.jsxs)("div",{className:G.registrations_model_body,children:[(0,t.jsxs)("form",{method:"post",className:G.rsm_form,acceptCharset:"UTF-8",onSubmit:X(sl),children:[(0,t.jsx)("input",{className:_()(G.rsm_input,L?G.registrations_input_standard:G.registrations_input,{[G.input_error]:null==se?void 0:null===(e=se.registrations)||void 0===e?void 0:e.email}),name:"registrations[email]",tag:"Auto-10000612",onFocus:sn,maxLength:"200","aria-label":null==w?void 0:w.placeholder,placeholder:null==w?void 0:w.placeholder,...J("registrations[email]",{required:null==w?void 0:w.info_fill_email,validate:s=>(0,d.G)(s)||(null==w?void 0:w.info_err_email)})}),(0,t.jsx)("p",{className:G.form_error,children:null==se?void 0:null===(n=se.registrations)||void 0===n?void 0:null===(i=n.email)||void 0===i?void 0:i.message}),(0,t.jsxs)("p",{className:_()(G.rsm_policy_box,G.checkout_box),children:[(0,t.jsx)("input",{className:_()(G.rsm_checkout,"RegistrationsMain_rsm_checkout"),name:"registrations[policy]",tag:"Auto-10000615",type:"checkbox",defaultChecked:so,"aria-label":"policy-checkbox",...J("registrations[policy]",{required:null==w?void 0:w.info_select_policy})}),(0,t.jsx)("span",{dangerouslySetInnerHTML:{__html:D({html:null==w?void 0:w.policy_text})},className:G.rsm_checkout_text})]}),(0,t.jsx)("p",{className:G.form_error,children:null==se?void 0:null===(k=se.registrations)||void 0===k?void 0:null===(l=k.policy)||void 0===l?void 0:l.message}),(0,t.jsxs)("p",{className:_()(G.rsm_subscribe_box,G.checkout_box),children:[(0,t.jsx)("input",{className:_()(G.rsm_checkout,"RegistrationsMain_rsm_checkout"),name:"registrations[subscribe]",tag:"Auto-10000616",type:"checkbox",defaultChecked:so,"aria-label":"subscribe-checkbox",...J("registrations[subscribe]")}),(0,t.jsx)("span",{className:G.rsm_checkout_text,children:w.subscribe_text})]}),(0,t.jsx)("p",{className:G.form_error,children:null==se?void 0:null===(j=se.registrations)||void 0===j?void 0:null===(R=j.subscribe)||void 0===R?void 0:R.info_select_policy}),!q&&(0,t.jsxs)("p",{className:_()(G.form_error,"rounded-[2px] bg-[rgba(248,77,79,0.08)] px-[12px] py-[10px]"),children:[(0,t.jsx)("span",{children:null==w?void 0:w.verifyError}),"\xa0",(0,t.jsx)("a",{onClick:sa,className:" cursor-pointer text-anker-color underline",children:null==w?void 0:w.sendEmailText})]}),K&&(0,t.jsx)("p",{className:_()(G.form_error,"rounded-[2px] bg-[rgba(248,77,79,0.08)] px-[12px] py-[10px]"),children:(0,t.jsx)("span",{children:null==w?void 0:w.serviceError})}),W?(0,t.jsx)("button",{className:_()(G.rsm_submit,L?G.registrations_btn_standard:G.registrations_btn,G.flex_center,G.loading_btn),children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,t.jsx)("path",{d:"M1 10C1 14.9706 5.02944 19 10 19C14.9706 19 19 14.9706 19 10C19 5.02944 14.9706 1 10 1",stroke:"white",strokeWidth:"2",strokeLinecap:"round"})})}):(0,t.jsx)("button",{type:"submit",tag:"Auto-10000617",className:_()(G.rsm_submit,L?G.registrations_btn_standard:G.registrations_btn,G.flex_center,"RegistrationsMain_rsm_submit"),children:null==w?void 0:w.register_text})]}),(0,t.jsxs)("p",{className:G.rsm_login,children:[w.login_text,(0,t.jsx)("a",{onClick:()=>C&&C($("registrations[email]")),children:null==w?void 0:w.login_now_text})]})]})]})}},97263:function(s,e,i){"use strict";var t=i(85893),r=i(54624),a=i.n(r),n=i(87536),o=i(67294),l=i(11163),_=i(99244),c=i(36413),d=i(13408),u=i(93967),b=i.n(u),m=i(79214);let g=(0,o.forwardRef)(function(s,e){let{onChange:i,...r}=s;return(0,t.jsx)(m.oc,{...r,mask:"+1 (000) 000-0000",definitions:{"#":/[1-9]/},inputRef:e,onAccept:e=>i({target:{name:s.name,value:e}})})});e.Z=s=>{var e,i,r,u;let{gs:m,data:p,registerEmail:h,onSubscribeSMSSuccess:x,onSubscribeSMSSkip:v,subscribe:f}=s,{register:S,handleSubmit:y,clearErrors:k,setError:R,formState:{errors:j}}=(0,n.cI)({shouldFocusError:!1,mode:"all"}),w={...a(),...m},[M,N]=(0,o.useState)(!1),[C,E]=(0,o.useState)(""),[T,A]=(0,o.useState)(0),[I,O]=(0,o.useState)(""),{locale:L}=(0,l.useRouter)(),U=async s=>{if(Reflect.ownKeys(j).length>0)return;N(!0);let{phone_number:e}=null==s?void 0:s.subscribeSMS,{register_source:i}=(0,c.m1)(),t=await (0,_.Z)({locale:L,url:"/api/multipass/rainbowbridge/activities",action:"activity",method:"POST",body:{email:h,register_source:i,shopify_domain:d.BR["".concat(L)],single_brand_subscribe:!0,genre:I,phone_number:e,promise_subscribe:f},headers:{"node-validate":"none"},needRecaptcha:!0}).finally(()=>N(!1));if(t.status>100&&t.status<300)x&&x();else{if(400===t.status){R("subscribeSMS[phone_number]",{type:"custom",message:null==p?void 0:p.validPhoneNumberText});return}if(409===t.status){R("subscribeSMS[phone_number]",{type:"custom",message:(null==p?void 0:p.validPhoneSubscribedText)||"This phone number is already subscribed."});return}A(null==p?void 0:p.countDownTime);let s=setInterval(()=>{A(e=>e<=0?(clearInterval(s),v&&v(),0):e-1)},1e3);E(null==p?void 0:p.sms_interfaceError)}};(0,o.useEffect)(()=>{O(window.screen.width<768?null==p?void 0:p.dealsType_mob:null==p?void 0:p.dealsType_pc)},[null==p?void 0:p.dealsType_mob,null==p?void 0:p.dealsType_pc]);let Z=(0,o.useCallback)(()=>{k(""),E&&E("")},[k]);return(0,t.jsx)("registrations-subscribe-sms",{className:w.registrations_subscribe_sms,children:(0,t.jsxs)("div",{className:w.registrations_subscribe_sms_wrap,children:[(0,t.jsx)("div",{className:w.registrations_subscribe_sms_head,children:(0,t.jsx)("p",{className:b()(w.registrations_title,w.rss_title),children:null==p?void 0:p.sms_title})}),(0,t.jsx)("div",{className:w.registrations_subscribe_sms_body,children:(0,t.jsx)("p",{className:w.rss_desc,dangerouslySetInnerHTML:{__html:null==p?void 0:p.sms_desc}})}),(0,t.jsx)("div",{className:w.registrations_subscribe_sms_footer,children:(0,t.jsxs)("form",{className:w.rss_form,onSubmit:y(U),children:[(0,t.jsxs)("div",{className:w.rss_form_item,children:[(0,t.jsx)("label",{className:w.rss_sms_label,children:null==p?void 0:p.sms_label}),(0,t.jsx)("div",{className:b()(w.rss_form_item),children:(0,t.jsx)(g,{type:"phone",name:"subscribeSMS[phone_number]",onFocus:()=>Z(),className:b()(w.registrations_input,{[w.input_error]:null==j?void 0:null===(i=j.subscribeSMS)||void 0===i?void 0:null===(e=i.phone_number)||void 0===e?void 0:e.message}),placeholder:p.sms_placeholder,...S("subscribeSMS[phone_number]",{required:null==p?void 0:p.phoneEmptyError})})})]}),(0,t.jsx)("p",{className:w.form_error,children:null==j?void 0:null===(u=j.subscribeSMS)||void 0===u?void 0:null===(r=u.phone_number)||void 0===r?void 0:r.message}),C&&T>0&&(0,t.jsxs)("p",{className:b()(w.form_error,"rounded-[2px] bg-[rgba(248,77,79,0.08)] px-[12px] py-[10px]"),children:[p.sms_interfaceError,"\xa0",(0,t.jsx)("span",{children:T}),"\xa0",(0,t.jsx)("span",{children:null==p?void 0:p.secondsText})]}),(0,t.jsxs)("div",{className:w.rss_btn_wrap,children:[(0,t.jsx)("button",{type:"submit",className:b()(w.rss_btn,w.rss_loading_btn,w.registrations_btn,{"pointer-events-none":!!T||M}),children:M?(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,t.jsx)("path",{d:"M1 10C1 14.9706 5.02944 19 10 19C14.9706 19 19 14.9706 19 10C19 5.02944 14.9706 1 10 1",stroke:"white",strokeWidth:"2",strokeLinecap:"round"})}):null==p?void 0:p.sms_subscribe}),(0,t.jsx)("button",{tag:"Auto-10000626",onClick:v,className:w.sms_skip,children:null==p?void 0:p.sms_skip})]})]})})]})})}},82328:function(s){s.exports={registrations_model_head:"RegistrationsMain_registrations_model_head__fSgFi",rsm_title:"RegistrationsMain_rsm_title__b_W5K",registrations_model_body:"RegistrationsMain_registrations_model_body__kxSRR",form_error:"RegistrationsMain_form_error__W6uCd",checkout_box:"RegistrationsMain_checkout_box__vcOML","rsm-subscribe-box":"RegistrationsMain_rsm-subscribe-box__P0dOa",rsm_policy_box:"RegistrationsMain_rsm_policy_box__1xmpE",rsm_subscribe_box:"RegistrationsMain_rsm_subscribe_box__bVx14",rsm_checkout_text:"RegistrationsMain_rsm_checkout_text__NwMMU",rsm_submit:"RegistrationsMain_rsm_submit__WDUbd",rsm_login:"RegistrationsMain_rsm_login__Wy2Fg",rsm_checkout:"RegistrationsMain_rsm_checkout__JfgEU"}},54624:function(s){s.exports={registrations_subscribe_sms:"RegistrationsSubscribeSMS_registrations_subscribe_sms__tTNmh",registrations_subscribe_sms_wrap:"RegistrationsSubscribeSMS_registrations_subscribe_sms_wrap__d3ULV",rss_title:"RegistrationsSubscribeSMS_rss_title__fM8Em",rss_desc:"RegistrationsSubscribeSMS_rss_desc__1am7d",rss_form:"RegistrationsSubscribeSMS_rss_form__2NbtM",rss_form_item:"RegistrationsSubscribeSMS_rss_form_item__nmMEd",rss_sms_label:"RegistrationsSubscribeSMS_rss_sms_label__rxOwF",rss_btn_wrap:"RegistrationsSubscribeSMS_rss_btn_wrap__ACZLM",rss_btn:"RegistrationsSubscribeSMS_rss_btn__AjQlU",sms_skip:"RegistrationsSubscribeSMS_sms_skip__nY47e",rss_loading_btn:"RegistrationsSubscribeSMS_rss_loading_btn__WU5kA",rotate:"RegistrationsSubscribeSMS_rotate__sEMSz"}},5539:function(s){s.exports={flex_center:"Registrations_flex_center__5P9_K",registrations_title:"Registrations_registrations_title__Cdove",registrations_btn:"Registrations_registrations_btn__ZHt4q",registrations_input:"Registrations_registrations_input__eshQE",registrations_back:"Registrations_registrations_back__teUYa",registrations_wrap:"Registrations_registrations_wrap__Hkpj9",rsm_close_mask:"Registrations_rsm_close_mask__LmRLM",form_error:"Registrations_form_error__AtOzN",loading_btn:"Registrations_loading_btn__GvkAk",rotate:"Registrations_rotate__liOye",disabled:"Registrations_disabled__EpP6Q",loading_icon:"Registrations_loading_icon__4bfOi",input_error:"Registrations_input_error__UdB7U"}}}]);