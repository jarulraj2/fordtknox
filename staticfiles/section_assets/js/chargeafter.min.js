(()=>{var e,t,n={7009:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function r(){r.init.call(this)}e.exports=r,e.exports.once=function(e,t){return new Promise((function(n,i){function o(n){e.removeListener(t,r),i(n)}function r(){"function"==typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}m(e,t,r,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&m(e,"error",t,n)}(e,o,{once:!0})}))},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function c(e,t,n,i){var o,r,s,c;if(a(n),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),r=e._events),s=r[t]),void 0===s)s=r[t]=n,++e._eventsCount;else if("function"==typeof s?s=r[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),(o=l(e))>0&&s.length>o&&!s.warned){s.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=e,d.type=t,d.count=s.length,c=d,console&&console.warn&&console.warn(c)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=d.bind(i);return o.listener=n,i.wrapFn=o,o}function f(e,t,n){var i=e._events;if(void 0===i)return[];var o=i[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):g(o,o.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function m(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(r){i.once&&e.removeEventListener(t,o),n(r)}))}}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),r.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return l(this)},r.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var o="error"===e,r=this._events;if(void 0!==r)o=o&&void 0===r.error;else if(!o)return!1;if(o){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=r[e];if(void 0===l)return!1;if("function"==typeof l)i(l,this,t);else{var c=l.length,d=g(l,c);for(n=0;n<c;++n)i(d[n],this,t)}return!0},r.prototype.addListener=function(e,t){return c(this,e,t,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(e,t){return c(this,e,t,!0)},r.prototype.once=function(e,t){return a(t),this.on(e,u(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,u(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,i,o,r,s;if(a(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,r=n.length-1;r>=0;r--)if(n[r]===t||n[r].listener===t){s=n[r].listener,o=r;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,r=Object.keys(n);for(i=0;i<r.length;++i)"removeListener"!==(o=r[i])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},r.prototype.listeners=function(e){return f(this,e,!0)},r.prototype.rawListeners=function(e){return f(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},r.prototype.listenerCount=p,r.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},8283:(e,t)=>{function n(e,t){var n=[],i=[];return null==t&&(t=function(e,t){return n[0]===t?"[Circular ~]":"[Circular ~."+i.slice(0,n.indexOf(t)).join(".")+"]"}),function(o,r){if(n.length>0){var s=n.indexOf(this);~s?n.splice(s+1):n.push(this),~s?i.splice(s,1/0,o):i.push(o),~n.indexOf(r)&&(r=t.call(this,o,r))}else n.push(r);return null==e?r:e.call(this,o,r)}}(e.exports=function(e,t,i,o){return JSON.stringify(e,n(t,o),i)}).getSerialize=n}},i={};function o(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={id:e,loaded:!1,exports:{}};return n[e](r,r.exports,o),r.loaded=!0,r.exports}o.m=n,o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,n)=>(o.f[n](e,t),t)),[])),o.u=e=>e+".js",o.miniCssF=e=>{},o.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="caJsonp:",o.l=(n,i,r,s)=>{if(e[n])e[n].push(i);else{var a,l;if(void 0!==r)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==t+r){a=u;break}}a||(l=!0,(a=document.createElement("script")).type="module",a.charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.setAttribute("data-webpack",t+r),a.src=n),e[n]=[i];var f=(t,i)=>{a.onerror=a.onload=null,clearTimeout(p);var o=e[n];if(delete e[n],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((e=>e(i))),t)return t(i)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=f.bind(null,a.onerror),a.onload=f.bind(null,a.onload),l&&document.head.appendChild(a)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="/",(()=>{var e={175:0};o.f.j=(t,n)=>{var i=o.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var r=new Promise(((n,o)=>i=e[t]=[n,o]));n.push(i[2]=r);var s=o.p+o.u(t),a=new Error;o.l(s,(n=>{if(o.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var r=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",a.name="ChunkLoadError",a.type=r,a.request=s,i[1](a)}}),"chunk-"+t,t)}};var t=(t,n)=>{var i,r,[s,a,l]=n,c=0;if(s.some((t=>0!==e[t]))){for(i in a)o.o(a,i)&&(o.m[i]=a[i]);if(l)l(o)}for(t&&t(n);c<s.length;c++)r=s[c],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0},n=self.webpackChunkcaJsonp=self.webpackChunkcaJsonp||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{"use strict";var e,t="user-agent",n="",i="function",r="undefined",s="object",a="string",l="browser",c="cpu",d="device",u="engine",f="os",p="result",g="name",m="type",h="vendor",v="version",b="architecture",w="major",y="model",I="console",C="mobile",O="tablet",k="smarttv",A="wearable",T="xr",S="embedded",E="inapp",P="brands",L="formFactors",_="fullVersionList",D="platform",x="platformVersion",N="bitness",M="sec-ch-ua",j=M+"-full-version-list",R=M+"-arch",U=M+"-"+N,$=M+"-form-factors",F=M+"-"+C,z=M+"-"+y,B=M+"-"+D,W=B+"-version",q=[P,_,C,y,D,x,b,L,N],H="Amazon",K="Apple",G="ASUS",V="BlackBerry",Y="Google",X="Huawei",J="Lenovo",Z="Honor",Q="LG",ee="Microsoft",te="Motorola",ne="Nvidia",ie="OnePlus",oe="OPPO",re="Samsung",se="Sharp",ae="Sony",le="Xiaomi",ce="Zebra",de="Chrome",ue="Chromium",fe="Chromecast",pe="Firefox",ge="Opera",me="Facebook",he="Sogou",ve="Mobile ",be=" Browser",we="Windows",ye=typeof window!==r&&window.navigator?window.navigator:void 0,Ie=ye&&ye.userAgentData?ye.userAgentData:void 0,Ce=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},Oe=function(e,t){if(typeof e===s&&e.length>0){for(var n in e)if(Se(e[n])==Se(t))return!0;return!1}return!!Ae(e)&&-1!==Se(t).indexOf(Se(e))},ke=function(e,t){for(var n in e)return/^(browser|cpu|device|engine|os)$/.test(n)||!!t&&ke(e[n])},Ae=function(e){return typeof e===a},Te=function(e){if(e){for(var t=[],n=Le(/\\?\"/g,e).split(","),i=0;i<n.length;i++)if(n[i].indexOf(";")>-1){var o=De(n[i]).split(";v=");t[i]={brand:o[0],version:o[1]}}else t[i]=De(n[i]);return t}},Se=function(e){return Ae(e)?e.toLowerCase():e},Ee=function(e){return Ae(e)?Le(/[^\d\.]/g,e).split(".")[0]:void 0},Pe=function(e){for(var t in e){var n=e[t];typeof n==s&&2==n.length?this[n[0]]=n[1]:this[n]=void 0}return this},Le=function(e,t){return Ae(t)?t.replace(e,n):t},_e=function(e){return Le(/\\?\"/g,e)},De=function(e,t){if(Ae(e))return e=Le(/^\s\s*/,e),typeof t===r?e:e.substring(0,500)},xe=function(e,t){if(e&&t)for(var n,o,r,a,l,c,d=0;d<t.length&&!l;){var u=t[d],f=t[d+1];for(n=o=0;n<u.length&&!l&&u[n];)if(l=u[n++].exec(e))for(r=0;r<f.length;r++)c=l[++o],typeof(a=f[r])===s&&a.length>0?2===a.length?typeof a[1]==i?this[a[0]]=a[1].call(this,c):this[a[0]]=a[1]:3===a.length?typeof a[1]!==i||a[1].exec&&a[1].test?this[a[0]]=c?c.replace(a[1],a[2]):void 0:this[a[0]]=c?a[1].call(this,c,a[2]):void 0:4===a.length&&(this[a[0]]=c?a[3].call(this,c.replace(a[1],a[2])):void 0):this[a]=c||void 0;d+=2}},Ne=function(e,t){for(var n in t)if(typeof t[n]===s&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(Oe(t[n][i],e))return"?"===n?void 0:n}else if(Oe(t[n],e))return"?"===n?void 0:n;return t.hasOwnProperty("*")?t["*"]:e},Me={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},je={embedded:"Automotive",mobile:"Mobile",tablet:["Tablet","EInk"],smarttv:"TV",wearable:"Watch",xr:["VR","XR"],"?":["Desktop","Unknown"],"*":void 0},Re={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[v,[g,ve+"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[v,[g,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[g,v],[/opios[\/ ]+([\w\.]+)/i],[v,[g,ge+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[v,[g,ge+" GX"]],[/\bopr\/([\w\.]+)/i],[v,[g,ge]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[v,[g,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[v,[g,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[g,v],[/quark(?:pc)?\/([-\w\.]+)/i],[v,[g,"Quark"]],[/\bddg\/([\w\.]+)/i],[v,[g,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[v,[g,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[v,[g,"WeChat"]],[/konqueror\/([\w\.]+)/i],[v,[g,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[v,[g,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[v,[g,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[v,[g,"Smart "+J+be]],[/(avast|avg)\/([\w\.]+)/i],[[g,/(.+)/,"$1 Secure"+be],v],[/\bfocus\/([\w\.]+)/i],[v,[g,pe+" Focus"]],[/\bopt\/([\w\.]+)/i],[v,[g,ge+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[v,[g,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[v,[g,"Dolphin"]],[/coast\/([\w\.]+)/i],[v,[g,ge+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[v,[g,"MIUI"+be]],[/fxios\/([\w\.-]+)/i],[v,[g,ve+pe]],[/\bqihoobrowser\/?([\w\.]*)/i],[v,[g,"360"]],[/\b(qq)\/([\w\.]+)/i],[[g,/(.+)/,"$1Browser"],v],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[g,/(.+)/,"$1"+be],v],[/samsungbrowser\/([\w\.]+)/i],[v,[g,re+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[v,[g,he+" Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[g,he+" Mobile"],v],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[g,v],[/(lbbrowser|rekonq)/i],[g],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[v,g],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[g,me],v,[m,E]],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/(daum)apps[\/ ]([\w\.]+)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(instagram|snapchat)[\/ ]([-\w\.]+)/i],[g,v,[m,E]],[/\bgsa\/([\w\.]+) .*safari\//i],[v,[g,"GSA"],[m,E]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[v,[g,"TikTok"],[m,E]],[/\[(linkedin)app\]/i],[g,[m,E]],[/(chromium)[\/ ]([-\w\.]+)/i],[g,v],[/headlesschrome(?:\/([\w\.]+)| )/i],[v,[g,de+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[g,de+" WebView"],v],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[v,[g,"Android"+be]],[/chrome\/([\w\.]+) mobile/i],[v,[g,ve+"Chrome"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[g,v],[/version\/([\w\.\,]+) .*mobile(?:\/\w+ | ?)safari/i],[v,[g,ve+"Safari"]],[/iphone .*mobile(?:\/\w+ | ?)safari/i],[[g,ve+"Safari"]],[/version\/([\w\.\,]+) .*(safari)/i],[v,g],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[g,[v,"1"]],[/(webkit|khtml)\/([\w\.]+)/i],[g,v],[/(?:mobile|tablet);.*(firefox)\/([\w\.-]+)/i],[[g,ve+pe],v],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[g,"Netscape"],v],[/(wolvic|librewolf)\/([\w\.]+)/i],[g,v],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[v,[g,pe+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(amaya|dillo|doris|icab|ladybird|lynx|mosaic|netsurf|obigo|polaris|w3m|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/\b(links) \(([\w\.]+)/i],[g,[v,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[g,[v,/[^\d\.]+./,n]]],cpu:[[/\b((amd|x|x86[-_]?|wow|win)64)\b/i],[[b,"amd64"]],[/(ia32(?=;))/i,/\b((i[346]|x)86)(pc)?\b/i],[[b,"ia32"]],[/\b(aarch64|arm(v?[89]e?l?|_?64))\b/i],[[b,"arm64"]],[/\b(arm(v[67])?ht?n?[fl]p?)\b/i],[[b,"armhf"]],[/( (ce|mobile); ppc;|\/[\w\.]+arm\b)/i],[[b,"arm"]],[/((ppc|powerpc)(64)?)( mac|;|\))/i],[[b,/ower/,n,Se]],[/ sun4\w[;\)]/i],[[b,"sparc"]],[/\b(avr32|ia64(?=;)|68k(?=\))|\barm(?=v([1-7]|[5-7]1)l?|;|eabi)|(irix|mips|sparc)(64)?\b|pa-risc)/i],[[b,Se]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[y,[h,re],[m,O]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[y,[h,re],[m,C]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[y,[h,K],[m,C]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[y,[h,K],[m,O]],[/(macintosh);/i],[y,[h,K]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[y,[h,se],[m,C]],[/\b((?:brt|eln|hey2?|gdi|jdn)-a?[lnw]09|(?:ag[rm]3?|jdn2|kob2)-a?[lw]0[09]hn)(?: bui|\)|;)/i],[y,[h,Z],[m,O]],[/honor([-\w ]+)[;\)]/i],[y,[h,Z],[m,C]],[/\b((?:ag[rs][2356]?k?|bah[234]?|bg[2o]|bt[kv]|cmr|cpn|db[ry]2?|jdn2|got|kob2?k?|mon|pce|scm|sht?|[tw]gr|vrd)-[ad]?[lw][0125][09]b?|605hw|bg2-u03|(?:gem|fdr|m2|ple|t1)-[7a]0[1-4][lu]|t1-a2[13][lw]|mediapad[\w\. ]*(?= bui|\)))\b(?!.+d\/s)/i],[y,[h,X],[m,O]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[y,[h,X],[m,C]],[/oid[^\)]+; (2[\dbc]{4}(182|283|rp\w{2})[cgl]|m2105k81a?c)(?: bui|\))/i,/\b((?:red)?mi[-_ ]?pad[\w- ]*)(?: bui|\))/i],[[y,/_/g," "],[h,le],[m,O]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i,/ ([\w ]+) miui\/v?\d/i],[[y,/_/g," "],[h,le],[m,C]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[y,[h,oe],[m,C]],[/\b(opd2(\d{3}a?))(?: bui|\))/i],[y,[h,Ne,{OnePlus:["304","403","203"],"*":oe}],[m,O]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[y,[h,"Vivo"],[m,C]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[y,[h,"Realme"],[m,C]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto(?! 360)[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[y,[h,te],[m,C]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[y,[h,te],[m,O]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[y,[h,Q],[m,O]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv|watch)\w+)/i,/\blg-?([\d\w]+) bui/i],[y,[h,Q],[m,C]],[/(ideatab[-\w ]+|602lv|d-42a|a101lv|a2109a|a3500-hv|s[56]000|pb-6505[my]|tb-?x?\d{3,4}(?:f[cu]|xu|[av])|yt\d?-[jx]?\d+[lfmx])( bui|;|\)|\/)/i,/lenovo ?(b[68]0[08]0-?[hf]?|tab(?:[\w- ]+?)|tb[\w-]{6,7})( bui|;|\)|\/)/i],[y,[h,J],[m,O]],[/(nokia) (t[12][01])/i],[h,y,[m,O]],[/(?:maemo|nokia).*(n900|lumia \d+|rm-\d+)/i,/nokia[-_ ]?(([-\w\. ]*))/i],[[y,/_/g," "],[m,C],[h,"Nokia"]],[/(pixel (c|tablet))\b/i],[y,[h,Y],[m,O]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[y,[h,Y],[m,C]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[y,[h,ae],[m,C]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[y,"Xperia Tablet"],[h,ae],[m,O]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[y,[h,ie],[m,C]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[y,[h,H],[m,O]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[y,/(.+)/g,"Fire Phone $1"],[h,H],[m,C]],[/(playbook);[-\w\),; ]+(rim)/i],[y,h,[m,O]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[y,[h,V],[m,C]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[y,[h,G],[m,O]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[y,[h,G],[m,C]],[/(nexus 9)/i],[y,[h,"HTC"],[m,O]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[h,[y,/_/g," "],[m,C]],[/tcl (xess p17aa)/i,/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])(_\w(\w|\w\w))?(\)| bui)/i],[y,[h,"TCL"],[m,O]],[/droid [\w\.]+; (418(?:7d|8v)|5087z|5102l|61(?:02[dh]|25[adfh]|27[ai]|56[dh]|59k|65[ah])|a509dl|t(?:43(?:0w|1[adepqu])|50(?:6d|7[adju])|6(?:09dl|10k|12b|71[efho]|76[hjk])|7(?:66[ahju]|67[hw]|7[045][bh]|71[hk]|73o|76[ho]|79w|81[hks]?|82h|90[bhsy]|99b)|810[hs]))(_\w(\w|\w\w))?(\)| bui)/i],[y,[h,"TCL"],[m,C]],[/(itel) ((\w+))/i],[[h,Se],y,[m,Ne,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[y,[h,"Acer"],[m,O]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[y,[h,"Meizu"],[m,C]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[y,[h,"Ulefone"],[m,C]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[y,[h,"Energizer"],[m,C]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[y,[h,"Cat"],[m,C]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[y,[h,"Smartfren"],[m,C]],[/droid.+; (a(?:015|06[35]|142p?))/i],[y,[h,"Nothing"],[m,C]],[/(imo) (tab \w+)/i,/(infinix) (x1101b?)/i],[h,y,[m,O]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus(?! zenw)|dell|jolla|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (hmd|imo) ([\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w ]+?)(?: bui|\)|\/)/i,/(oppo) ?([\w ]+) bui/i],[h,y,[m,C]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i],[h,y,[m,O]],[/(surface duo)/i],[y,[h,ee],[m,O]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[y,[h,"Fairphone"],[m,C]],[/((?:tegranote|shield t(?!.+d tv))[\w- ]*?)(?: b|\))/i],[y,[h,ne],[m,O]],[/(sprint) (\w+)/i],[h,y,[m,C]],[/(kin\.[onetw]{3})/i],[[y,/\./g," "],[h,ee],[m,C]],[/droid.+; ([c6]+|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[y,[h,ce],[m,O]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[y,[h,ce],[m,C]],[/smart-tv.+(samsung)/i],[h,[m,k]],[/hbbtv.+maple;(\d+)/i],[[y,/^/,"SmartTV"],[h,re],[m,k]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[h,Q],[m,k]],[/(apple) ?tv/i],[h,[y,K+" TV"],[m,k]],[/crkey.*devicetype\/chromecast/i],[[y,fe+" Third Generation"],[h,Y],[m,k]],[/crkey.*devicetype\/([^/]*)/i],[[y,/^/,"Chromecast "],[h,Y],[m,k]],[/fuchsia.*crkey/i],[[y,fe+" Nest Hub"],[h,Y],[m,k]],[/crkey/i],[[y,fe],[h,Y],[m,k]],[/droid.+aft(\w+)( bui|\))/i],[y,[h,H],[m,k]],[/(shield \w+ tv)/i],[y,[h,ne],[m,k]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[y,[h,se],[m,k]],[/(bravia[\w ]+)( bui|\))/i],[y,[h,ae],[m,k]],[/(mi(tv|box)-?\w+) bui/i],[y,[h,le],[m,k]],[/Hbbtv.*(technisat) (.*);/i],[h,y,[m,k]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[h,De],[y,De],[m,k]],[/droid.+; ([\w- ]+) (?:android tv|smart[- ]?tv)/i],[y,[m,k]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[m,k]],[/(ouya)/i,/(nintendo) (\w+)/i],[h,y,[m,I]],[/droid.+; (shield)( bui|\))/i],[y,[h,ne],[m,I]],[/(playstation \w+)/i],[y,[h,ae],[m,I]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[y,[h,ee],[m,I]],[/\b(sm-[lr]\d\d[0156][fnuw]?s?|gear live)\b/i],[y,[h,re],[m,A]],[/((pebble))app/i,/(asus|google|lg|oppo) ((pixel |zen)?watch[\w ]*)( bui|\))/i],[h,y,[m,A]],[/(ow(?:19|20)?we?[1-3]{1,3})/i],[y,[h,oe],[m,A]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[y,[h,K],[m,A]],[/(opwwe\d{3})/i],[y,[h,ie],[m,A]],[/(moto 360)/i],[y,[h,te],[m,A]],[/(smartwatch 3)/i],[y,[h,ae],[m,A]],[/(g watch r)/i],[y,[h,Q],[m,A]],[/droid.+; (wt63?0{2,3})\)/i],[y,[h,ce],[m,A]],[/droid.+; (glass) \d/i],[y,[h,Y],[m,T]],[/(pico) (4|neo3(?: link|pro)?)/i],[h,y,[m,T]],[/; (quest( \d| pro)?)/i],[y,[h,me],[m,T]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[h,[m,S]],[/(aeobc)\b/i],[y,[h,H],[m,S]],[/(homepod).+mac os/i],[y,[h,K],[m,S]],[/windows iot/i],[[m,S]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+?(mobile|vr|\d) safari/i],[y,[m,Ne,{mobile:"Mobile",xr:"VR","*":O}]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[m,O]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[m,C]],[/droid .+?; ([\w\. -]+)( bui|\))/i],[y,[h,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[v,[g,"EdgeHTML"]],[/(arkweb)\/([\w\.]+)/i],[g,v],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[v,[g,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[g,v],[/ladybird\//i],[[g,"LibWeb"]],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[v,g]],os:[[/microsoft (windows) (vista|xp)/i],[g,v],[/(windows (?:phone(?: os)?|mobile|iot))[\/ ]?([\d\.\w ]*)/i],[g,[v,Ne,Me]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[v,Ne,Me],[g,we]],[/[adehimnop]{4,7}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[v,/_/g,"."],[g,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[g,"macOS"],[v,/_/g,"."]],[/android ([\d\.]+).*crkey/i],[v,[g,fe+" Android"]],[/fuchsia.*crkey\/([\d\.]+)/i],[v,[g,fe+" Fuchsia"]],[/crkey\/([\d\.]+).*devicetype\/smartspeaker/i],[v,[g,fe+" SmartSpeaker"]],[/linux.*crkey\/([\d\.]+)/i],[v,[g,fe+" Linux"]],[/crkey\/([\d\.]+)/i],[v,[g,fe]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[v,g],[/(ubuntu) ([\w\.]+) like android/i],[[g,/(.+)/,"$1 Touch"],v],[/(android|bada|blackberry|kaios|maemo|meego|openharmony|qnx|rim tablet os|sailfish|series40|symbian|tizen|webos)\w*[-\/; ]?([\d\.]*)/i],[g,v],[/\(bb(10);/i],[v,[g,V]],[/(?:symbian ?os|symbos|s60(?=;)|series ?60)[-\/ ]?([\w\.]*)/i],[v,[g,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[v,[g,pe+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[v,[g,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[v,[g,"watchOS"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[g,"Chrome OS"],v],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) (\w+)/i,/(xbox); +xbox ([^\);]+)/i,/(pico) .+os([\w\.]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux)(?: arm\w*| x86\w*| ?)([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[g,v],[/(sunos) ?([\w\.\d]*)/i],[[g,"Solaris"],v],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[g,v]]},Ue=(Pe.call((e={init:{},isIgnore:{},isIgnoreRgx:{},toString:{}}).init,[[l,[g,v,w,m]],[c,[b]],[d,[m,y,h]],[u,[g,v]],[f,[g,v]]]),Pe.call(e.isIgnore,[[l,[v,w]],[u,[v]],[f,[v]]]),Pe.call(e.isIgnoreRgx,[[l,/ ?browser$/i],[f,/ ?os$/i]]),Pe.call(e.toString,[[l,[g,v]],[c,[b]],[d,[h,y]],[u,[g,v]],[f,[g,v]]]),e),$e=function(e,t){var i=Ue.init[t],o=Ue.isIgnore[t]||0,s=Ue.isIgnoreRgx[t]||0,a=Ue.toString[t]||0;function l(){Pe.call(this,i)}return l.prototype.getItem=function(){return e},l.prototype.withClientHints=function(){return Ie?Ie.getHighEntropyValues(q).then((function(t){return e.setCH(new Fe(t,!1)).parseCH().get()})):e.parseCH().get()},l.prototype.withFeatureCheck=function(){return e.detectFeature().get()},t!=p&&(l.prototype.is=function(e){var t=!1;for(var n in this)if(this.hasOwnProperty(n)&&!Oe(o,n)&&Se(s?Le(s,this[n]):this[n])==Se(s?Le(s,e):e)){if(t=!0,e!=r)break}else if(e==r&&t){t=!t;break}return t},l.prototype.toString=function(){var e=n;for(var t in a)typeof this[a[t]]!==r&&(e+=(e?" ":n)+this[a[t]]);return e||r}),Ie||(l.prototype.then=function(e){var t=this,n=function(){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e])};n.prototype={is:l.prototype.is,toString:l.prototype.toString};var i=new n;return e(i),i}),new l};function Fe(e,t){if(e=e||{},Pe.call(this,q),t)Pe.call(this,[[P,Te(e[M])],[_,Te(e[j])],[C,/\?1/.test(e[F])],[y,_e(e[z])],[D,_e(e[B])],[x,_e(e[W])],[b,_e(e[R])],[L,Te(e[$])],[N,_e(e[U])]]);else for(var n in e)this.hasOwnProperty(n)&&typeof e[n]!==r&&(this[n]=e[n])}function ze(e,t,n,o){return this.get=function(e){return e?this.data.hasOwnProperty(e)?this.data[e]:void 0:this.data},this.set=function(e,t){return this.data[e]=t,this},this.setCH=function(e){return this.uaCH=e,this},this.detectFeature=function(){if(ye&&ye.userAgent==this.ua)switch(this.itemType){case l:ye.brave&&typeof ye.brave.isBrave==i&&this.set(g,"Brave");break;case d:!this.get(m)&&Ie&&Ie[C]&&this.set(m,C),"Macintosh"==this.get(y)&&ye&&typeof ye.standalone!==r&&ye.maxTouchPoints&&ye.maxTouchPoints>2&&this.set(y,"iPad").set(m,O);break;case f:!this.get(g)&&Ie&&Ie[D]&&this.set(g,Ie[D]);break;case p:var e=this.data,t=function(t){return e[t].getItem().detectFeature().get()};this.set(l,t(l)).set(c,t(c)).set(d,t(d)).set(u,t(u)).set(f,t(f))}return this},this.parseUA=function(){return this.itemType!=p&&xe.call(this.data,this.ua,this.rgxMap),this.itemType==l&&this.set(w,Ee(this.get(v))),this},this.parseCH=function(){var e=this.uaCH,t=this.rgxMap;switch(this.itemType){case l:case u:var n,i=e[_]||e[P];if(i)for(var o in i){var r=i[o].brand||i[o],s=i[o].version;this.itemType!=l||/not.a.brand/i.test(r)||n&&(!/chrom/i.test(n)||r==ue)||(r=Ne(r,{Chrome:"Google Chrome",Edge:"Microsoft Edge","Chrome WebView":"Android WebView","Chrome Headless":"HeadlessChrome"}),this.set(g,r).set(v,s).set(w,Ee(s)),n=r),this.itemType==u&&r==ue&&this.set(v,s)}break;case c:var a=e[b];a&&(a&&"64"==e[N]&&(a+="64"),xe.call(this.data,a+";",t));break;case d:if(e[C]&&this.set(m,C),e[y]&&(this.set(y,e[y]),!this.get(m)||!this.get(h))){var I={};xe.call(I,"droid 9; "+e[y]+")",t),!this.get(m)&&I.type&&this.set(m,I.type),!this.get(h)&&I.vendor&&this.set(h,I.vendor)}if(e[L]){var O;if("string"!=typeof e[L])for(var k=0;!O&&k<e[L].length;)O=Ne(e[L][k++],je);else O=Ne(e[L],je);this.set(m,O)}break;case f:var A=e[D];if(A){var T=e[x];A==we&&(T=parseInt(Ee(T),10)>=13?"11":"10"),this.set(g,A).set(v,T)}this.get(g)==we&&"Xbox"==e[y]&&this.set(g,"Xbox").set(v,void 0);break;case p:var S=this.data,E=function(t){return S[t].getItem().setCH(e).parseCH().get()};this.set(l,E(l)).set(c,E(c)).set(d,E(d)).set(u,E(u)).set(f,E(f))}return this},Pe.call(this,[["itemType",e],["ua",t],["uaCH",o],["rgxMap",n],["data",$e(this,e)]]),this}function Be(e,o,r){if(typeof e===s?(ke(e,!0)?(typeof o===s&&(r=o),o=e):(r=e,o=void 0),e=void 0):typeof e!==a||ke(o,!0)||(r=o,o=void 0),r&&typeof r.append===i){var g={};r.forEach((function(e,t){g[t]=e})),r=g}if(!(this instanceof Be))return new Be(e,o,r).getResult();var m=typeof e===a?e:r&&r[t]?r[t]:ye&&ye.userAgent?ye.userAgent:n,h=new Fe(r,!0),v=o?function(e,t){var n={},i=t;if(!ke(t))for(var o in i={},t)for(var r in t[o])i[r]=t[o][r].concat(i[r]?i[r]:[]);for(var s in e)n[s]=i[s]&&i[s].length%2==0?i[s].concat(e[s]):e[s];return n}(Re,o):Re,b=function(e){return e==p?function(){return new ze(e,m,v,h).set("ua",m).set(l,this.getBrowser()).set(c,this.getCPU()).set(d,this.getDevice()).set(u,this.getEngine()).set(f,this.getOS()).get()}:function(){return new ze(e,m,v[e],h).parseUA().get()}};return Pe.call(this,[["getBrowser",b(l)],["getCPU",b(c)],["getDevice",b(d)],["getEngine",b(u)],["getOS",b(f)],["getResult",b(p)],["getUA",function(){return m}],["setUA",function(e){return Ae(e)&&(m=e.length>500?De(e,500):e),this}]]).setUA(m),this}Be.VERSION="2.0.2",Be.BROWSER=Ce([g,v,w,m]),Be.CPU=Ce([b]),Be.DEVICE=Ce([y,h,m,I,C,k,O,A,S]),Be.ENGINE=Be.OS=Ce([g,v]);const We=["color: #d96666","color: #6495ed"],qe=["appName","service","message"],He=[],Ke=["printOriginalToConsole","isConsoleOnly","filename","function"],Ge=(e,t)=>Object.entries(t).reduce(((t,[n,i])=>((e?Ke:He).includes(n)||qe.includes(n)||(t[n]=i),t)),{}),Ve=({module:e="",message:t,logData:n})=>{const i=Ge(!1,n);return(e=>{const{error:t,err:n,er:i,e:o}=e,r=t||n||i||o,s=t?"error":n?"err":i?"er":"e";if(r&&r instanceof Error){const{name:t,message:n,stack:i}=r;e[s]={name:t,message:n,stack:i}}})(i),[`[Client]${e.replace(/%c| /g,"")}${t&&` ${t}`||""}`,i]},Ye=({message:e,logMessage:t,logData:n},i)=>{const o=Ge(!0,n);return[t,...i,e+(Object.keys(o).length?",":""),...Object.entries(o).reduce(((e,[t,n])=>(e.push(`${t}:`,"string"==typeof n?`${n},`:n),e)),[])]};var Xe=o(8283),Je=o.n(Xe);let Ze=function(e){return e[e.OFF=0]="OFF",e[e.TRACE=1]="TRACE",e[e.DEBUG=2]="DEBUG",e[e.INFO=3]="INFO",e[e.LOG=4]="LOG",e[e.WARN=5]="WARN",e[e.ERROR=6]="ERROR",e[e.FATAL=7]="FATAL",e}({});const Qe={[Ze.OFF]:"Off",[Ze.DEBUG]:"Debug",[Ze.INFO]:"Info",[Ze.TRACE]:"Info",[Ze.LOG]:"Info",[Ze.WARN]:"Warning",[Ze.ERROR]:"Error",[Ze.FATAL]:"Critical"},et={[Ze.OFF]:"debug",[Ze.DEBUG]:"debug",[Ze.INFO]:"info",[Ze.TRACE]:"log",[Ze.LOG]:"log",[Ze.WARN]:"warn",[Ze.ERROR]:"error",[Ze.FATAL]:"error"},tt=[];let nt,it=!1,ot=0;const rt=e=>{const t=Je()(e);if(131072<new Blob([t]).size/1024){const t=Math.floor(e.length/2);return tt.unshift(...e.splice(t,e.length)),rt(e)}return{body:t,currLogs:e}},st=(e,t=3e3)=>(...n)=>{nt&&clearTimeout(nt),nt=setTimeout((()=>{e.apply(void 0,n)}),t)},at=st((e=>{lt(e)})),lt=(e,t=!1)=>{if(!tt.length||ot>3||!e.logsUrl)return;if(it)return at(e);it=!0;const{body:n,currLogs:i}=rt(tt.splice(0,100));fetch(e.logsUrl,Object.assign({method:"POST",headers:{"Content-Type":"application/json"},body:n},t&&{keepalive:!0})).then((t=>{if(!t.ok)throw new Error(t.statusText);ot=0,it=!1,tt.length>100&&at(e)})).catch((t=>{it=!1,0===ot&&ct(e,Ze.ERROR,["Failed to send logs to server",{error:t.message,timestamp:Date.now(),function:"sendLogsToServer",filename:"logger.sender.ts"}]);const n=st((e=>{lt(e)}),2e3*(0===ot?1:ot));ot<=3&&(tt.unshift(...i),n(e)),++ot}))},ct=(e,t,n)=>{const[i,o]=n,r=`frontend${e.browserSessionId?`_${e.browserSessionId}`:""}${e.correlationId?`_${e.correlationId}`:""}${e.linkId?`_${e.linkId}`:""}${e.sessionId?`_${e.sessionId}`:""}`;tt.push({severity:Qe[t],timestamp:o.timestamp,messageText:i,data:o,correlationId:r}),tt.length<100?at(e):(nt&&clearTimeout(nt),lt(e))},dt=window,ut=dt.console,ft=["^Warning: Received .* for a non-boolean attribute .*","^Warning: React does not recognize the .* prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase .* instead. If you accidentally passed it from a parent component, remove it from the DOM element.*","^Using kebab-case for css properties in objects is not supported. Did you mean.*","^Warning: A component is changing an uncontrolled input to be controlled. This is likely caused by the value changing from undefined to a defined value, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components","^Warning: findDOMNode is deprecated and will be removed in the next major release. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely.*","^Warning: validateDOMNesting\\(\\.\\.\\.\\): .* cannot appear as a descendant of .*","^Warning: Failed .* type: .*"].join("|"),pt=(e,t)=>(n,i)=>{t(n,Object.assign({},i,e()))},gt=["modal","salesapp"],mt=(e,t)=>{const n=et[e];if(e!==Ze.ERROR){const e=t.filter((e=>"string"==typeof e)),i=t.length>1&&("string"==typeof t[0]?t.slice(1,t.length):t)||[];ut[n](...e,{function:"interceptConsole",filename:"LoggerService"},...i)}e===Ze.ERROR&&("string"==typeof(null==t?void 0:t[0])&&new RegExp(ft).test(t[0])?ut.warn(...t):ut[n](...t))},ht=new Be;let vt=[];const bt=(e,t=!1)=>{vt.forEach((({logLevel:t,log:n,message:i})=>{wt(e,t,i,n)})),vt=[],lt(e.config,t)},wt=(e,t,n,i)=>{const{config:o,merchantName:r}=e,{browser:s,engine:a,os:l}=ht.getResult(),c=(e=>{var t;const n=null!=(t=e.message)?t:"",i=`%c[${e.appName}]${e.service&&` [${e.service}]`||""}`,o={module:i,logMessage:`${i} %c[${e.filename}] [${e.function}]`,message:n,logData:e};return{server:!e.isConsoleOnly&&Ve(o)||void 0,console:Ye(o,We)}})(Object.assign({},i,{browserSessionId:o.browserSessionId,deviceSessionId:o.deviceSessionId,correlationId:o.correlationId,linkId:o.linkId,os:l.name,osVersion:l.version,browserEngineName:a.name,browserEngineVersion:a.version,browserName:null==s?void 0:s.name,browserVersion:null==s?void 0:s.version,sessionId:o.sessionId,appName:o.appName,origin:o.origin,merchantName:r,message:n}));if((!o.production||[Ze.ERROR,Ze.FATAL].includes(t))&&c.console){ut[et[t]](...c.console)}c.server&&ct(o,t,c.server)},yt=(e,t)=>(n,i)=>{const o=t(),{config:r,isInitialized:s}=o;if(s||ut.error(`Logger is not initialized, called console.${et[e]} with message:`,n,"and log data:",i),!i||!i.filename||!i.function)throw new Error("Log data is required");if([Ze.ERROR,Ze.FATAL].includes(e))console.error(new Error(n),Ge(!0,i));else if("string"!=typeof n&&null!=n&&n.printOriginalToConsole||null!=i&&i.printOriginalToConsole){const t=Ge(!0,i);ut[et[e]](n,...Object.values(t))}const a={message:n,log:Object.assign({},i,{timestamp:Date.now()})};if(!r.browserSessionId&&!r.sessionId||!s)return((e,t,n)=>{vt.push({logLevel:e,log:n,message:t})})(e,n,a.log);wt(o,e,n,a.log)};class Logger{set version(e){this.config.version=e}set merchantName(e){this._merchantName=e,this.setSentryTag("merchantName",e)}set fullStoryUrl(e){this.setSentryTag("fullStoryUrl",e)}set sessionId(e){this.config.sessionId=e,this.setSentryTag("sessionId",e),bt(this.getConfig())}set origin(e){this.config.origin=e,this.setSentryTag("origin",e)}set browserSessionId(e){this.config.browserSessionId=e,this.setSentryTag("browserSessionId",e),bt(this.getConfig())}set deviceSessionId(e){this.config.deviceSessionId=e,this.setSentryTag("deviceSessionId",e)}set correlationId(e){this.config.correlationId=e,this.setSentryTag("correlationId",e)}set linkId(e){this.config.linkId=e,this.setSentryTag("linkId",e)}get isTracingAllowed(){var e;return this.isSentryInitialized&&(null==(e=this.config.sentryConfig)?void 0:e.tracing)}constructor(e){this.config={production:!1,appName:"",logsUrl:""},this.isSentryInitialized=!1,this._merchantName="",this.isInitialized=!1,this.getConfig=()=>({config:this.config,merchantName:this._merchantName,isInitialized:this.isInitialized}),this.log=yt(Ze.LOG,this.getConfig),this.info=yt(Ze.INFO,this.getConfig),this.warn=yt(Ze.WARN,this.getConfig),this.error=yt(Ze.ERROR,this.getConfig),this.group=e=>{ut.group("[ChargeAfter]",e)},this.groupCollapsed=(...e)=>{ut.groupCollapsed("[ChargeAfter]",...e)},this.groupEnd=()=>{ut.groupEnd()},this.service=e=>{let t="-1";const n=()=>({version:t,service:e});return{set version(e){t=e},log:pt(n,this.log),info:pt(n,this.info),warn:pt(n,this.warn),error:pt(n,this.error)}},this.flush=()=>{bt(this.getConfig(),!0)},this.getLogs=()=>rt(tt.slice()),this.getServerUrl=()=>this.config.logsUrl,e&&this.init(e)}setSentryTag(e,t){this.setSentryTags({[e]:t})}setSentryTags(e){this.isSentryInitialized&&Promise.all([o.e(179),o.e(95)]).then(o.bind(o,95)).then((({setSentryTags:t})=>t(e)))}initSentry(){var e;null!=(e=this.config)&&null!=(e=e.sentryConfig)&&e.dsn&&!/headless/.test(navigator.userAgent.toLowerCase())&&Promise.all([o.e(179),o.e(95)]).then(o.bind(o,95)).then((({initSentry:e})=>{this.config.sentryConfig&&(e(this.config.sentryConfig),this.isSentryInitialized=!0)}))}init(e){var t;this.config=e,this.initSentry(),this.isInitialized=!!e,t=e.appName,-1!==gt.indexOf(t.toLowerCase())&&(dt.console=Object.assign({},dt.console,{log:(...e)=>mt(Ze.LOG,e),info:(...e)=>mt(Ze.INFO,e),warn:(...e)=>mt(Ze.WARN,e),error:(...e)=>mt(Ze.ERROR,e)}))}}new Logger;const It=window,Ct=document,Ot="https://api.chargeafter.com/v2",kt={production:!0,containerSelector:".ca-promotional-widget",buttonSelector:".ca-checkout-button",specialContainerSelector:".ca-lenovo-promotional-widget",apiUrl:Ot,promotionUrl:`${Ot}/promotional-info`,cdnUrl:"https://cdn.chargeafter.com",logsUrl:"https://logging-proxy-ca-production-170512-af60esna.uc.gateway.dev/log",version:"1.1.5256-releases-3-4-0",envName:"production",externalScriptId:"ca-external-script",iframe:{url:"https://pm.chargeafter.com",id:"ca-modal-iframe",style:"position: fixed;top: 0;left:0;width: 100%;height: 100%;z-index: 10010000000;border: 0;box-sizing: border-box;background-color: #00000038;display:none;"}};var At;const Tt=new Logger({logsUrl:kt.logsUrl,appName:"SDK",production:kt.production,origin:null==(At=It.location)?void 0:At.origin});const St=function(e){let t,n;const i=new Promise(((i,o)=>{t=i,n=o,null!=e&&("function"==typeof e?e(i,o):e.constructor===Promise&&e.then(i,o))}));return i.resolve=t,i.reject=n,i};function Et(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(i){return Promise.reject(i)}}}const Pt=(e,t=0)=>{let n,i=null;return Et((function(...o){const r=Et((function(){return clearTimeout(n),t=e(...o).catch((e=>{var t;throw null==(t=i)||t.reject(e),i=null,e})),r=function(e){var t;null==(t=i)||t.resolve(e),i=null},s?r?r(t):t:(t&&t.then||(t=Promise.resolve(t)),r?t.then(r):t);var t,r,s}));return i||(i=new St),clearTimeout(n),n=setTimeout(r,t),i}))},Lt=["large-generic","small-generic","medium-generic","large-square","small-square","medium-square"],_t=["product-widget-line-of-credit","line-of-credit","product-widget-syf","product-widget-line-of-credit-by-promo"],Dt=["banner-vertical","banner-horizontal","banner-horizontal-upto-48months","banner-horizontal-upto-6months","banner-vertical-upto-48months","banner-vertical-upto-6months","default","textual","product-widget"],xt=["product-widget-line-of-credit","product-widget-syf","product-widget-installments","line-of-credit"],Nt=["default","product-widget","product-widget-syf","product-widget-line-of-credit","product-widget-line-of-credit-by-promo","product-widget-installments","banner-vertical","banner-horizontal","banner-vertical-upto-6months","banner-horizontal-upto-6months","banner-vertical-upto-48months","banner-horizontal-upto-48months","line-of-credit","textual","default-template","multi-lender"],Mt="validations",jt=/^=|(\b)(on\S+)(\s*)=|javascript|<(|\/|[^\\/>][^>]+|\/[^>][^>]+)>/gi,Rt=e=>("string"==typeof e&&e||"number"==typeof e)&&!isNaN(+e),Ut=e=>"string"==typeof e&&!!e,$t=e=>"object"==typeof e&&!(e instanceof Array)&&null!==e,Ft=e=>"function"==typeof e,zt=e=>{const t={filename:Mt,function:"isWidgetValid",printOriginalToConsole:!0},{widgetType:n,widgetItemPrice:i,widgetItemSku:o,widgetFinancingPageUrl:r,buttonType:s,widgetProfileId:a}=e,l=Dt.includes(n),c=s;return Nt.includes(n)||Lt.includes(s)||a?!(!l&&!c)||(i&&o&&"string"==typeof o?xt.indexOf(n)>-1&&!r?(Tt.error(`Cannot render widget (SKU: "${o}"), because the mandatory attribute "data-widget-financing-page-url" was not added to the widget's element`,Object.assign({},t,{isSeverityWarn:!0})),!1):!(isNaN(+i)||+i<0)||(Tt.error(`Cannot render widget, item price is not in the correct format should be bigger or equal to 0. received:${i}`,Object.assign({},t,{isSeverityWarn:!0})),!1):(Tt.error(`Cannot render widget${o?" "+o:""}, because ${o||i?"the mandatory attribute "+(i?'"data-widget-item-sku"':'"data-widget-item-price"'):'at least one of the mandatory attributes "data-widget-item-sku" and "data-widget-item-price"'} ${"string"!=typeof o&&null!=o?"is not of type string":"were not added to the widget's element"}`,Object.assign({},t,{isSeverityWarn:!0})),!1)):(Tt.error(`Cannot render widget, the type "${n||s}" is not supported, the supported types are "${(s?Lt:Nt).join(", ")}"`,Object.assign({},t,{isSeverityWarn:!0})),!1)},Bt=e=>{let t=!0;if(e)for(const n in e){const i=e[n];if("object"!=typeof i||i instanceof Array){if("string"==typeof i&&new RegExp(jt).test(i)){t=!1;break}}else t=Bt(i)}return t},Wt=e=>{if(e.widgetFinancingPageUrl&&/[-a-zA-Z0-9@:%_+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_+.~#?&//=]*)?/gi.test(e.widgetFinancingPageUrl)&&!/^http:|https:/.test(e.widgetFinancingPageUrl))e.widgetFinancingPageUrl=`https://${e.widgetFinancingPageUrl}`;else if(e.widgetFinancingPageUrl){const t=document.createElement("a");t.href=e.widgetFinancingPageUrl,e.widgetFinancingPageUrl=`${/^http:|https:/.test(t.protocol)?t.protocol:location.protocol}//${t.host}${/^\//.test(t.pathname)?t.pathname:`/${t.pathname}`}${t.search}`}return"string"==typeof e.widgetItemPrice&&(e.widgetItemPrice=e.widgetItemPrice.replace(/[^0-9.-]+/g,"")),_t.includes(e.widgetType)&&(e.widgetType="product-widget-line-of-credit"),Object.assign({},e)},qt=e=>{var t,n;if(!e)return Tt.error("can't continue application because cartDetails was not provided",{function:"isMerchantOptValid",filename:Mt,printOriginalToConsole:!0}),!1;const{items:i,discounts:o}=e;if(r=i,!Array.isArray(r)||!r.length)return Tt.error("cart details provided without items",{function:"validateCartDetails",filename:Mt,printOriginalToConsole:!0}),!1;var r;const s={items:void 0,discounts:void 0};var a;return s.items=i.filter((e=>{var t,n,i,o;return!(Ut(e.name)&&Rt(e.price)&&Rt(e.quantity)&&Ut(e.sku)&&(o=e.warranty,$t(o)||null==o)&&(!e.warranty||Ut(null==(t=e.warranty)?void 0:t.name)&&Rt(null==(n=e.warranty)?void 0:n.price)&&Ut(null==(i=e.warranty)?void 0:i.sku)))})),s.discounts=null==o?void 0:o.filter((e=>!Ut(e.name)||!Rt(e.amount))),!(null!=(t=s.items)&&t.length||null!=(n=s.discounts)&&n.length)||(s.items.length&&Tt.error(`the following cart Items missing basic or warranty data: ${JSON.stringify(s.items)}`,{filename:Mt,function:"validateCartDetails",printOriginalToConsole:!0}),null!=s&&null!=(a=s.discounts)&&a.length&&Tt.error(`the following cart discounts missing basic data: ${JSON.stringify(s.discounts)}`,{filename:Mt,function:"validateCartDetails",printOriginalToConsole:!0}),!1)},Ht=(e,t)=>qt(e)?!!(({totalAmount:e,taxAmount:t,shippingAmount:n,discounts:i=[],items:o=[]})=>{var r,s;if(null!=(r=location)&&null!=(r=r.host)&&r.toLowerCase().includes("sh.chargeafter.com")||null!=(s=location)&&null!=(s=s.host)&&s.toLowerCase().includes("shopify.chargeafter.com"))return!0;const a=i.reduce(((e,t)=>+e+ +t.amount),0),l=(+t+ +n+ +o.reduce(((e,t)=>{var n;return e+(+t.price*+t.quantity+ +((null==(n=t.warranty)?void 0:n.price)||0))}),0)-+a).toFixed(2),c=(+e).toFixed(2)===l;return c||Tt.error(`totalAmount is not matching the cart details, totalAmount received:${e.toFixed(2)}, totalAmount calculated:${l}`,{function:"validateCartAmount",filename:Mt,printOriginalToConsole:!0}),c})(e)||(t(void 0,void 0,{code:"TOTAL_AMOUNT_MISMATCH",message:"totalAmount is not matching the cart details"}),!1):(t(void 0,void 0,{code:"MISSING_CHECKOUT_DATA",message:"Partial or missing cartDetails"}),!1),Kt=e=>$t(e)?!e.isCheckout||(Ft(e.callback)?(e=>{if(e){const t=Ut(e.token);return t||Tt.error("The application cannot be continued because token is missing",{function:"validateManaged",filename:Mt,printOriginalToConsole:!0}),t}return!0})(e.managed)?Gt(e)?!!(e.managed||e.applicationId||e.sessionToken)||(Ft(e.onDataUpdate)||$t(e.consumerDetails)&&(({shippingAddress:e,billingAddress:t}={})=>{const n=!!(Ut(null==e?void 0:e.city)&&Ut(null==e?void 0:e.zipCode)&&Ut(null==e?void 0:e.state)&&Ut(null==e?void 0:e.line1)&&Ut(null==t?void 0:t.city)&&Ut(null==t?void 0:t.zipCode)&&Ut(null==t?void 0:t.state)&&Ut(null==t?void 0:t.line1));return n||Tt.error("some data is missing from shipping and/or billing addresses, while updateCallBack was not provided",{function:"validateAddress",filename:Mt,isSeverityWarn:!0,printOriginalToConsole:!0}),n})(e.consumerDetails)?!!Ht(e.cartDetails,e.callback)&&(!!Bt(e.consumerDetails)||(Tt.error("consumer details contains illegal char",{function:"isMerchantOptValid",filename:Mt,printOriginalToConsole:!0}),e.callback(void 0,void 0,{code:"ILLEGAL_CHAR_PROVIDED",message:"consumer details contains illegal char"}),!1)):(e.callback(void 0,void 0,{code:"MISSING_CHECKOUT_DATA",message:"Partial or missing billing and shipping address, and no onDataUpdate to allow modification"}),!1)):(e.callback(void 0,void 0,{code:"MISSING_CHECKOUT_DATA",message:"Intent object is invalid"}),!1):(e.callback(void 0,void 0,{code:"MISSING_CHECKOUT_DATA",message:"Token is missing from managed object"}),!1):(Tt.error('can\'t continue application because "callBack" was not provided in opt',{function:"isMerchantOptValid",filename:Mt,printOriginalToConsole:!0}),!1)):(Tt.error("can't continue application because opt was not passed",{function:"isMerchantOptValid",filename:Mt,printOriginalToConsole:!0}),!1),Gt=e=>!("intent"in e)||Ut(e.intent.lenderId)&&Ut(e.intent.type)&&("Authenticate"!==e.intent.type||Ut(e.sessionToken)),Vt=()=>([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)));let Yt,Xt,Jt=!0;const Zt=window,Qt={get get(){var e,t;const n=(null==(e=Zt.caConfig)?void 0:e.browserSessionId)||(null==(t=Zt.ChargeAfter)||null==(t=t.cfg)?void 0:t.browserSessionId);return Yt||(Yt=n||Vt(),Xt=Date.now(),Jt=!0),Yt},get sendBrowserSessionStartedEvent(){return Jt},set sendBrowserSessionStartedEvent(e){Jt=e},get timestamp(){return Yt?Xt:0},set set(e){e!==Yt&&(Jt=!0,Xt=Date.now(),Yt=e)}};let en="";const tn="ca-storage-userKey",nn=()=>{const e=(()=>{try{return localStorage.getItem(tn)}catch(e){return""}})();e?en=e:(en=Math.random().toString(36).substring(2),(e=>{try{localStorage.setItem(tn,e)}catch(t){}})(en))},on=()=>(en||nn(),en);function rn(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function sn(e,t){try{var n=e()}catch(i){return t(i)}return n&&n.then?n.then(void 0,t):n}const an=document;function ln(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(i){return Promise.reject(i)}}}const cn={filename:"sdk.actions",href:It.location.href,function:"fetchWidgets"},dn=ln((function({apiKey:e,storeId:t,userId:n,linkId:i,language:o="en-US",widgets:r=[],currency:s,sendBrowserSessionStartedEvent:a}){const l=`Frontend_${Qt.get}_${Vt()}`,c=on();return sn((function(){const d=JSON.stringify({"Content-Type":"application/json",Authorization:`Bearer ${e}`,"x-dcode-flow":l,"x-ca-store-id":t,"x-ca-user-id":n}),u=JSON.stringify(Object.assign({items:r,storeId:t,userId:n,linkId:i,language:o,currency:s,userKey:c,browserSessionId:Qt.get},r.length&&{sendBrowserSessionStartedEvent:a,timestamp:Qt.timestamp})),f=new FormData;return f.append("body",u),f.append("headers",d),f.append("method","POST"),rn(fetch(kt.promotionUrl,{credentials:"include",method:"POST",body:f}),(function(s){const a=s.clone();return rn(s.json().catch(ln((function(s){const l=Tt.error,c=kt.promotionUrl,d=null==a?void 0:a.statusText,u=null==a?void 0:a.status;return rn(null==a||null==a.text?void 0:a.text(),(function(f){l.call(Tt,"failed to parse response to json",Object.assign({},cn,{error:s,url:c,apiKey:e,response:{status:u,statusText:d,body:f,headers:null==a?void 0:a.headers},body:JSON.stringify({items:r,storeId:t,userId:n,linkId:i,language:o}),errorMessage:s.message}))}))}))))}))}),(function(s){Tt.error("fetching widgets failed",Object.assign({},cn,{error:s,url:kt.promotionUrl,apiKey:e,body:JSON.stringify({items:r,storeId:t,userId:n,linkId:i,language:o}),errorMessage:s.message}))}))})),un=ln((function({apiKey:e,storeId:t,userId:n,merchantId:i}){const o=`Frontend_${Qt.get}_${Vt()}`,r=kt.apiUrl+"/promotions";return sn((function(){const s=Object.assign({"Content-Type":"application/json",Authorization:`Bearer ${e}`,"x-dcode-flow":o},t&&{"x-ca-store-id":t},n&&{"x-ca-user-id":n},i&&{"x-ca-merchant-id":i});return rn(fetch(r,{credentials:"include",headers:s}),(function(t){const n=t.clone();return rn(t.json().catch(ln((function(t){const i=Tt.error,o=null==n?void 0:n.statusText,s=null==n?void 0:n.status;return rn(null==n||null==n.text?void 0:n.text(),(function(a){i.call(Tt,"failed to parse response to json",Object.assign({},cn,{function:"getPromotions",error:t,url:r,apiKey:e,response:{status:s,statusText:o,body:a,headers:null==n?void 0:n.headers},errorMessage:t.message}))}))}))))}))}),(function(t){Tt.error("fetching promotions failed",Object.assign({},cn,{function:"getPromotions",error:t,url:r,apiKey:e,errorMessage:t.message}))}))}));let fn,pn,gn,mn={},hn=!1;const vn=new Map,bn={get widgets(){return mn},set widgets(e){mn=e},get config(){return fn},set config(e){fn=e},get isInitialized(){return hn},set isInitialized(e){hn=e},get basePromotionModalData(){return gn},set basePromotionModalData(e){gn=e},get sdkInitializedPromise(){return pn},set sdkInitializedPromise(e){pn=e},get itemsToUpdate(){return vn}};const wn={filename:"initWidgets",href:It.location.href,function:"initWidgets"},yn=(In=function(e,t,n){const i=!e,o=Date.now();let r=e;if(!e){const{promotionRequestPayload:e,widgets:t}=(()=>{const{containerSelector:e,buttonSelector:t}=kt,n=an.querySelectorAll(`${e}, ${t}`),i=[],o={};return n.forEach((e=>{const t=Wt(e.dataset),n=t.widgetItemSku;zt(t)&&!o[n||t.widgetType||t.buttonType]&&(o[n||t.widgetType||t.buttonType]={widget:t},i.push(t))})),{widgets:o,promotionRequestPayload:i}})();r=e,bn.widgets=t}if(!r||0===r.length)return;Tt.log("initializing widgets",Object.assign({function:"initWidgets"},wn,{widgetsData:e}));const{apiKey:s,storeId:a,currency:l}=bn.config;return c=dn({widgets:r,language:t,apiKey:s,storeId:a,currency:n||l,sendBrowserSessionStartedEvent:Qt.sendBrowserSessionStartedEvent}),d=function(e){if(Qt.sendBrowserSessionStartedEvent=!1,e){var t;const{widgets:n={},basePromotionModalData:r={}}=((e,t)=>{var n;let i;const{promotions:o=[],merchant:r,lendersInWaterfall:s,canApplyFromWidget:a,configuration:l,configurationSessionId:c}=t,d={merchant:Object.assign({},r,{id:null==l||null==(n=l.branding)?void 0:n.merchantId}),lendersInWaterfall:s,canApplyFromWidget:a,configuration:l,configurationSessionId:c},u={};for(const f of o){i=f.referenceId?`${kt.containerSelector}[data-widget-item-sku=${JSON.stringify(f.referenceId)}]`:`${f.buttonType?kt.buttonSelector:kt.containerSelector}[data-${f.buttonType?"button":"widget"}-type=${JSON.stringify(f.widgetType||f.buttonType)}]`;const t=f.referenceId||f.widgetType||f.buttonType;t in e&&(u[t]=Object.assign({},e[t],{selector:i,promotion:f}),e[t].selector=i,e[t].promotion=f)}return{widgets:u,basePromotionModalData:d}})(bn.widgets,e);Object.values(n).forEach((e=>{Ct.querySelectorAll(e.selector).forEach((t=>{t.innerHTML=e.promotion.el,!e.promotion.el&&e.promotion.errorMessage&&Tt.error(e.promotion.errorMessage.replace("{profile}",e.widget.widgetProfileId),Object.assign({},wn,{printOriginalToConsole:!0,isConsoleOnly:!0,widget:e.widget}))}))})),e.cssData&&((e,t)=>{const n=an.getElementById(e.key),i=n||an.createElement("style"),o=[];i.id=e.key,t&&(i.innerHTML=""),e.css.split(/(.*?\})/g).forEach((e=>{const t=e.split(/(?=\{)/g);null!=t&&t[0]&&e&&o.push(e.trim())})),o.forEach((e=>{i.innerHTML.includes(e)||i.appendChild(an.createTextNode(e))})),n||an.head.insertBefore(i,an.head.firstChild)})(e.cssData,i),bn.basePromotionModalData=r,bn.config.merchantId=null==(t=bn.basePromotionModalData.merchant)?void 0:t.id;const s=Date.now()-o;Tt.log(`widgets initialized within ${s}ms`,Object.assign({},wn,{widgets:bn.widgets,widgetsInitTime:s}))}},u?d?d(c):c:(c&&c.then||(c=Promise.resolve(c)),d?c.then(d):c);var c,d,u},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(In.apply(this,e))}catch(n){return Promise.reject(n)}});var In;const Cn=(e,t)=>{Tt.error(`called ${e} without initializing sdk`,{function:e,filename:t,printOriginalToConsole:!0,isSeverityWarn:!0})};function On(){}const kn="update.ts";const An=Pt(Tn((function(e,t,n){var i;let o;return void 0===t&&(t=null==(i=bn.config)||null==(i=i.preferences)?void 0:i.language),Tt.log("updating widgets",{function:"update",filename:kn,items:e}),null!=e&&e.length&&(o=e.reduce(((e,t)=>{var n,i;const o=t.sku,r=t.price;let s=(null==(n=bn.widgets)||null==(n=n[o])?void 0:n.widget)||(null==(i=Ct.querySelector(`[data-widget-item-sku=${JSON.stringify(o)}]`))?void 0:i.dataset);return s?(s.widgetItemPrice=r,s=Wt(s),zt(s)&&(e.push(s),bn.widgets[o]=Object.assign({},bn.widgets[o]||{},{widget:s})),e):e}),[])),function(e){var t=e();if(t&&t.then)return t.then(On)}((function(){var i;if(null!=(i=o)&&i.length||null==e||!e.length)return function(e,t){if(!t)return e&&e.then?e.then(On):Promise.resolve()}(yn(o,t,n));Tt.error("the items provided are invalid",{function:"update",filename:kn})}))})),500);function Tn(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(i){return Promise.reject(i)}}}const Sn=Tn((function(e=[],t,n){var i,o,r,s;if(void 0===t&&(t=null==(i=bn.config)||null==(i=i.preferences)?void 0:i.language),!bn.isInitialized)return Cn("update","update.ts");for(const a of e)a.sku&&bn.itemsToUpdate.set(a.sku,a);return o=An(Array.from(bn.itemsToUpdate.values()),t,n),r=function(){bn.itemsToUpdate.clear()},s?r?r(o):o:(o&&o.then||(o=Promise.resolve(o)),r?o.then(r):o)})),En=e=>{try{return JSON.parse(JSON.stringify(e))}catch(t){return Tt.error("failed to serialize object",{function:"serialize",filename:"serialize",obj:e,e:t}),e}};class DBUY{constructor(){this.isEventAdded=!1,this.modal=void 0,this.windowRef=window,this.modalCloseHandler=e=>{let t=!1;if("string"==typeof e.data)switch(t=!1,e.data){case"Close Model":case"Return To Merchant Shipping":t=!0,Tt.log("DBUY_RETURNED_MSG",{filename:"dbuy.ts",function:"modalCloseHandler",data:e.data}),this.sendMsg({action:"DBUY_RETURNED_MSG",dbuyData:{action:"DBUY_CLOSE"}}),this.modal.style.display="block"}t&&(Tt.log("DBUY_REMOVING",{filename:"dbuy.ts",function:"modalCloseHandler",data:e.data}),this.windowRef.removeEventListener("message",this.modalCloseHandler),this.isEventAdded=!1,this.modal=null,this.windowRef=null)},this.sendMsg=e=>{this.modal&&this.modal.contentWindow.postMessage(e,"*")},this.load=this.load.bind(this)}load(e,t){const{url:n,dbuy:i={}}=e;Tt.log("DBUY_START_LOADING",{filename:"dbuy.ts",function:"load"}),this.modal=t;const o=()=>{var e;Tt.log("DBUY_SCRIPT_LOADEDG",{filename:"dbuy.ts",function:"onLoadScript"}),this.isEventAdded||(this.windowRef.addEventListener("message",this.modalCloseHandler),this.isEventAdded=!0),this.sendMsg({action:"DBUY_RETURNED_MSG",dbuyData:{action:"DBUY_LOADED"}}),null==(e=this.windowRef.syfDBuy)||e.calldBuyProcess(null,Object.assign({},i,{processInd:1,clientTransId:Vt()})),setTimeout((()=>{t.style.display="none"}),50)},r=(e,n,i,o,r)=>{Tt.log("DBUY_FAIL_O_LOAD",{filename:"dbuy.ts",function:"onErrorScript",error:r,event:e,source:n,lineno:i,colno:o,errorMessage:r.message}),t.style.display="block",this.sendMsg({action:"DBUY_RETURNED_MSG",dbuyData:{action:"DBUY_ERROR"}})};if(document.getElementById("caSyfDbuyScript"))return o&&setTimeout(o,50);if(n){const e=document.createElement("script");e.id="caSyfDbuyScript",e.onload=o,e.onerror=r,e.src=n,document.body.appendChild(e)}}}let Pn;const Ln=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(i){return Promise.reject(i)}}}((function(e,t=[]){return function(e,t){try{var n=e()}catch(i){return t(i)}return n&&n.then?n.then(void 0,t):n}((function(){return n=null==e?void 0:e(...t),i=function(e){return new Promise((t=>t({status:"success",value:e})))},o?i?i(n):n:(n&&n.then||(n=Promise.resolve(n)),i?n.then(i):n);var n,i,o}),(function(e){return new Promise((t=>t({status:"failure",value:{message:null==e?void 0:e.message,stack:null==e?void 0:e.stack,error:e}})))}))}));function _n(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.includes(i))continue;n[i]=e[i]}return n}var Dn=o(7009),xn=o.n(Dn);const Nn=["headersInfo"],Mn=window,jn=document;function Rn(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(i){return Promise.reject(i)}}}const Un=window;const $n="message.listener";function Fn(){}let zn={};function Bn(e){var t=e();if(t&&t.then)return t.then(Fn)}const Wn=(e,t)=>(n,i)=>{Tt.log(`creating message listeners for ${null==i?void 0:i.name}`,{function:"createMessageFunction",filename:$n});const o="string"==typeof t?[t]:t;return new Promise((t=>{var r;const s=new AbortController,a=e=>{const{data:n}=e;"CAMODAL"===n.source&&o.includes(n.action)&&(n.id===(null==i?void 0:i.name)||"static"===n.id&&"global"===(null==i?void 0:i.name))&&(Tt.log(`received message ${n.action} for ${null==i?void 0:i.name}`,{function:"createMessageFunction",filename:$n,data:n}),t(n),s.abort(),Un.removeEventListener("message",a))};Un.addEventListener("message",a,{signal:s.signal}),null==i||null==(r=i.contentWindow)||r.postMessage(Object.assign({},n,{source:"CASDK",id:i.name,action:e}),"*")}))},qn=(Rn((function(e,t,n){return new Promise((i=>{var o;Tt.log(`sending message ${e.action} to ${null==n?void 0:n.name}`,{function:"sendMessageToModal",filename:$n,payload:e,responseMessageType:t});const r=new AbortController,s=e=>{const{data:o}=e;"CAMODAL"===o.source&&o.action===t&&o.id===n.name&&(Tt.log(`received message ${o.action} for ${null==n?void 0:n.name}`,{function:"sendMessageToModal",filename:$n,data:o}),i(o),r.abort(),Un.removeEventListener("message",s))};t?Un.addEventListener("message",s,{signal:r.signal}):i(),null==n||null==(o=n.contentWindow)||o.postMessage(Object.assign({},e,{source:"CASDK",id:n.name}),"*")}))})),(e,t,n)=>{zn[e]={},zn[e].listener=Rn((function({data:e}){return Bn((function(){if("CAMODAL"===e.source)return Bn((function(){if(n[e.action]&&e.id===t.name)return Tt.log(`received message ${e.action} for ${null==t?void 0:t.name}`,{function:"createListenersEvents",filename:$n,data:e}),i=n[e.action].onMessage(e),o=function(i){var o;n[e.action].responseAction&&(null==t||null==(o=t.contentWindow)||o.postMessage(Object.assign({},i,{source:"CASDK",id:t.name,action:n[e.action].responseAction}),"*"))},r?o?o(i):i:(i&&i.then||(i=Promise.resolve(i)),o?i.then(o):i);var i,o,r}))}))}));const i=new AbortController;return Un.addEventListener("message",zn[e].listener,{signal:i.signal}),zn[e].signal=i,i}),Hn=(e,t)=>{const n=document.getElementById(`${kt.iframe.id}${"global"===e?"":`-${e}`}`);if(n){const e=new MutationObserver((i=>{i.forEach((i=>{if(i.removedNodes.length>0){const o=Array.from(i.removedNodes);(o.indexOf(n)>-1||o.some((e=>e.contains(n))))&&(Tt.log(`modal ${t} removed from DOM`,{function:"listenToModalRemoveFromDom",filename:$n,pathname:parent.location.pathname}),parent.postMessage({action:"CLOSE_MODAL",source:"CAMODAL",id:t},"*"),e.disconnect())}}))}));e.observe(document.body,{subtree:!0,childList:!0})}else setTimeout((()=>Hn(e,t)),100)};function Kn(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}const Gn=window;function Vn(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(i){return Promise.reject(i)}}}const Yn="modal.actions";function Xn(e,t){try{var n=e()}catch(i){return t(i)}return n&&n.then?n.then(void 0,t):n}const Jn=document;function Zn(){}const Qn=(e,t)=>new Promise((n=>{let i;if("string"==typeof t){if(i=document.querySelector(t),!i)throw new Error(`ChargeAfter: Container with selector ${t} not found`);e.setAttribute("style",kt.iframe.style.replace("position: fixed;","position:relative;").replace("background-color: #00000038","background-color: #F5F7FA"))}if(i||(i=t instanceof HTMLElement&&t||Jn.body),i.contains(e))n();else{i.appendChild(e);const t=({data:e})=>{"CAMODAL"!==e.source||"APPLICATION_LOADED"!==e.action&&"APPLICATION_INIT"!==e.action||(Gn.removeEventListener("message",t),n())};Gn.addEventListener("message",t)}})),ei=Vn((function({id:e,container:t,name:n,url:i}){Tt.log("creating modal iframe",{function:"createIframe",id:e,name:n,container:t&&t.toString(),filename:Yn});const o=document.getElementById(e)||Jn.createElement("iframe");o.setAttribute("title","Payment option flow"),o.setAttribute("style",kt.iframe.style),o.setAttribute("name",n),o.setAttribute("id",e),o.setAttribute("src",i||kt.iframe.url);const r=(...e)=>{throw e.length&&e[e.length-1]||new Error("modal failed to initialize")};return o.onerror=r,o.onabort=r,Kn(Qn(o,t),(function(){return o}))})),ti=(e,t)=>{const n=document.createElement("script");return n.setAttribute("id",kt.externalScriptId),n.setAttribute("src",e),n.setAttribute("async","true"),n.async=!0,n.onerror=t,n.onabort=t,n},ni=(e,t)=>{var n;Tt.log("SDK sends message",{function:"sendMsg",filename:Yn,payload:e}),null==t||null==(n=t.contentWindow)||n.postMessage(Object.assign({},e,{source:"CASDK",id:t.name}),"*")},ii=Wn("GET_DIRECT_LENDERS",["ON_GET_DIRECT_LENDERS_RECEIVED","COMPLETION_CALLBACK_CALLED"]),oi=Wn("APPLICATION_INIT","APPLICATION_INIT_DONE"),ri=Wn("OPEN_MODAL",["CLOSE_MODAL","COMPLETION_CALLBACK_CALLED"]),si=Wn("OPEN_MODAL",["CLOSE_MODAL","COMPLETION_CALLBACK_CALLED"]),ai=Vn((function({isCheckout:e,callbackData:t,onComplete:n,presentCallback:i,widgetData:o}){const r={function:"callMerchantCallbacks",filename:Yn,isCallbackExist:!!i,isOnCompleteCallbackExist:!!n,callbackData:t,isCheckout:e};return Tt.log("about to call merchant callback",r),function(e){if(e&&e.then)return e.then(Zn)}(Xn((function(){const{token:s,data:a,status:l}=t,{widgetItemCategory:c,widgetItemPrice:d,widgetItemSku:u,widgetItemTag:f}=o||{};return Kn(Promise.all([Ln(n,[s,a,l,Object.assign({source:e?"CHECKOUT":"APPLY"},o&&{promotion:{category:c,price:d,sku:u,tag:f}})]),Ln(i,e?[s,a,l]:[a,l])]),(function(e){Tt[e.some((e=>"failure"===e.status))?"error":"log"]("merchant callback result",Object.assign({},r,{callbackResult:e}))}))}),(function(e){Tt.error("An error accrued while calling merchant callback",Object.assign({},r,{error:e,message:e.message,printOriginalToConsole:!1,isSeverityWarn:!0}))})))})),li=Vn((function(e,t,n){return Xn((function(){let i,o;Tt.log("about to call merchant onDataUpdate",{function:"callMerchantDataUpdate",filename:Yn,isOnDataUpdateExist:!!n,updatedData:e,isCheckout:t});const r=new Promise((e=>{o=e}));return Kn(null==n?void 0:n(e,o),(function(e){return i=e,t=function(){return i},(n=function(){if(!i)return Kn(r,(function(e){i=e}))}())&&n.then?n.then(t):t(n);var t,n}))}),(function(e){return Tt.error("An error accrued while calling merchant onDataUpdate",{function:"onUpdateDataCalled",filename:Yn,error:e,message:e.message}),{}}))})),ci=({isCheckout:e,merchantActions:{onConfirm:t,onDataUpdate:n,onApprovalStatusChange:i,onApplicationCreated:o,onApplicationCreatedGlobal:r}={},modalData:s,widgetData:a})=>{const{iframe:l}=s;return qn(s.id,l,{CONFIRM:{onMessage:function({confirmationId:e,callbackData:n}){return null==t||t(e,n),Kn()}},OPEN_DBUY:{onMessage:Vn((function({dbuyData:e}){return e&&l&&(new DBUY).load(e,l),Kn()}))},OPEN_EXTERNAL_SCRIPT:{onMessage:Vn((function({scriptInfo:e,scriptUrl:t}){return t&&e&&((e,t,{createScript:n,sendMsg:i})=>{var o,r,s;let a,{scriptUrl:l,scriptInfo:{headersInfo:c}}=t,d=_n(t.scriptInfo,Nn);const u=new(xn()),f=e.iframe,p=e.id,g=()=>{var e;null==(e=a)||e.remove(),Mn.caExternalScript=void 0,u.removeAllListeners(),f.style.display="block"},m=Tt.service((null==(o=e.data)?void 0:o.lenderName)||(null==(r=e.data)?void 0:r.lenderId)||(null==(s=e.data)?void 0:s.lenderSessionId)||"");u.addListener("complete",((e,t,n)=>{g(),i({type:"payments",action:"OPEN_EXTERNAL_SCRIPT_COMPLETE",paymentsData:{success:e,consumerDetails:t,options:n},id:p},f)})),u.addListener("onLoadComplete",(()=>{f.style.display="none",i({type:"payments",action:"OPEN_EXTERNAL_SCRIPT_LOADED",id:p},f)})),Mn.caExternalScript=Object.freeze({complete:(...e)=>u.emit("complete",...e),onLoadCompleted:()=>u.emit("onLoadComplete"),config:Object.freeze(d),headersInfo:Object.freeze(c),logger:m}),a=n(l,(()=>{g(),Tt.error("External script failed to load",{function:"loadExternalScript",filename:"external.actions"}),i({type:"payments",action:"OPEN_EXTERNAL_SCRIPT_COMPLETE",paymentsData:{success:!1},id:p},f)})),jn.body.appendChild(a)})(s,{scriptInfo:e,scriptUrl:t},{sendMsg:ni,createScript:ti}),Kn()}))},ON_UPDATE_DATA_CALLED:{responseAction:"ON_UPDATE_DATA_CALLED",onMessage:Vn((function(t){return Kn(li(t.updatedData,e,n),(function(e){return{type:"payments",paymentsData:{opt:{cartDetails:e}}}}))}))},ON_APPROVAL_STATUS_CHANGE:{onMessage:function({status:e,data:t}){return null==i||i(e,t),Kn()}},ON_APPLICATION_CREATED:{onMessage:Vn((function({applicationId:e}){return null==o||o(e),null==r||r(e,{source:s.payload.type||"APPLY",promotion:{category:null==a?void 0:a.widgetItemCategory,price:null==a?void 0:a.widgetItemPrice,sku:null==a?void 0:a.widgetItemSku,tag:null==a?void 0:a.widgetItemTag}}),Kn()}))},SET_FEATURE_FLAGS:{onMessage:Vn((function({featureFlags:e}){return Pn=e,Kn()}))}})};function di(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}let ui=null;function fi(e,t){var n=e();return n&&n.then?n.then(t):t(n)}const pi="modal.manager";function gi(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(i){return Promise.reject(i)}}}const mi=document;function hi(){}function vi(e,t){if(!t)return e&&e.then?e.then(hi):Promise.resolve()}let bi={},wi="";const yi=gi((function({modalId:e,config:t,type:n="promotions",iframeData:i={}}){const{container:o,name:r=e,id:s=kt.iframe.id}=i;let a;return Tt.log(`creating modal for ${e}`,{function:"createModal",filename:pi,isModalExist:!!bi[e]}),fi((function(){var i;return null!=(i=bi[e])&&i.iframe?di(Qn(bi[e].iframe,o),(function(){var t;a=null==(t=bi[e])?void 0:t.iframe})):(bi[e]=Object.assign({},bi[e]||{},{isInitialized:!1,isPresenting:!0,id:e}),di(ei({id:s,container:o,name:r,url:`${kt.iframe.url}/v3/?key=${(null==t?void 0:t.apiKey)||""}&storeId=${(null==t?void 0:t.storeId)||""}`}),(function(i){a=i;const o=!(null==It||!It.__isUnderCaTest__);return di(oi({type:n,id:e,browserSessionId:Qt.get,caConfig:Object.assign({},En(t||{}),{browserSessionId:Qt.get,origin:location.origin,href:location.href},o&&{isUnderTest:o})},a),(function(){bi[e]&&(bi[e].iframe=a,bi[e].isInitialized=!0)}))})))}),(function(){return Hn(e,r),a}))})),Ii=gi((function({payload:e,config:t,isCheckout:n=!1,merchantActions:i}){ui=mi.activeElement;let o=null;return fi((function(){if("paymentsData"in e&&"opt"in e.paymentsData)return o=e.paymentsData.opt.containerSelector,function(e){var t=e();if(t&&t.then)return t.then(hi)}((function(){var n;if("lenderId"in e.paymentsData.opt&&null!=(n=e.paymentsData.opt)&&n.lenderId)return fi((function(){if(!wi)return vi(ki(t,e.configurationSessionId))}),(function(){var t;e.paymentsData.sessionId=wi,e.paymentsData.lenderSessionId=null==(t=bi[e.paymentsData.opt.lenderId])||null==(t=t.data)?void 0:t.lenderSessionId}))}))}),(function(){const r="global",{iframe:s,isPresenting:a=!1}=bi[r]||{};if(!a)return di(yi(Object.assign({modalId:r,type:e.type,config:t},o&&{iframeData:{id:kt.iframe.id,container:o,name:e.type}})),(function(t){var o;if(!bi[r])return;const s=ci({modalData:Object.assign({},bi[r],{payload:e}),isCheckout:n,merchantActions:i,widgetData:"promotions"===e.type?null==e||null==(o=e.widget)?void 0:o.widgetData:void 0});Tt.log(`starting to present modal ${e.type}`,{function:"present",filename:pi,payload:e,isPresenting:a,isModalExist:!!t}),bi[r].isPresenting=!0;const l=mi.body.style.overflow;t.style.display="block",mi.body.style.overflow="hidden";const c=(e=>{const t=()=>{Tt.log("closing modal due to popstate",{function:"listenToPopState",filename:Yn}),e.contentWindow.postMessage({action:"CLOSE_MODAL",type:"payments",source:"CASDK",id:e.name},"*")};return setTimeout((()=>Gn.addEventListener("popstate",t)),100),()=>{Gn.removeEventListener("popstate",t)}})(t);return null==i||null==i.onModalOpen||i.onModalOpen(),di(ri(Object.assign({},e,{id:"global"}),t),(function(o){var a;c();const d="payments"===(null==o?void 0:o.type)&&"data"in o;return di(d&&ai({isCheckout:n,callbackData:o.data,onComplete:null==i?void 0:i.onComplete,presentCallback:null==i?void 0:i.callback,widgetData:"promotions"===e.type?null==e||null==(a=e.widget)?void 0:a.widgetData:void 0}),(function(e){var n;return null==s||s.abort(),bi[r]&&(bi[r].isPresenting=!1),t.style.display="none",mi.body.style.overflow=l,null==(n=ui)||null==n.focus||n.focus(),"data"in o&&o.data||null}),!d)}))}));Tt.log(`${e.type} modal is already presented`,{function:"present",filename:pi,payload:e,isPresenting:a,isModalExist:!!s})}))})),Ci=gi((function({lenderId:e,config:t,container:n,cartDetails:i,callback:o,preferences:r,configurationSessionId:s}){return fi((function(){if(!wi)return vi(ki(t,s))}),(function(){if(!bi[e])return void Tt.error(`cannot create eligibility modal with the lenderId ${e} because its is not supported`,{function:"modalPresentEligibility",filename:pi,printOriginalToConsole:!0});ui=mi.activeElement;const{data:{lenderName:a}={lenderName:null}}=bi[e];return di(yi({modalId:e,type:"eligibility",config:t,iframeData:{id:kt.iframe.id+"-"+e,container:n,name:a}}),(function(t){if(!bi[e])return;t.style.display="block";const n={type:"promotions",configurationSessionId:s,eligibilityData:{inlineMode:!0,sessionId:wi,opt:{cartDetails:i,lenderName:a,lenderId:e,preferences:r}}},l=qn(e,t,{ELIGIBILITY_CHECK_STATUS_RECEIVED:{onMessage:function({eligible:e}){return null==o||o(e),di()}},LENDER_SESSION_ID:{onMessage:gi((function({lenderId:e,lenderSessionId:t}){return bi[e].data.lenderSessionId=t,di()}))}});return bi[e].isPresenting=!0,di(si(Object.assign({},n,{id:e}),t),(function(){var n;bi[e].isPresenting=!1,null==l||l.abort(),t.style.display="none",null==(n=ui)||null==n.focus||n.focus()}))}))}))})),Oi=()=>{Tt.log("disposing modal data",{function:"dispose",filename:pi});for(const t of Object.values(bi)){var e;null==(e=t.iframe)||e.remove()}bi={},(()=>{Tt.log("removes all message listeners",{function:"sendMsg",filename:$n});for(const e of Object.values(zn))null!=e&&e.listener&&e.listener&&Un.removeEventListener("message",e.listener),null!=e&&e.signal&&e.signal.abort();zn={}})()},ki=gi((function(e,t){var n;const i="global";if(null!=(n=bi)&&null!=(n=n[i])&&n.isPresenting)throw new Error("getDirectLenders cannot be called while modal is presenting");return di(yi({modalId:i,type:"payments",config:e}),(function(){if(!bi[i])return;bi[i].isPresenting=!1;const{iframe:e}=bi[i];return di(ii({type:"payments",id:"global",configurationSessionId:t},e),(function(e){if("data"in e&&"status"in e.data)throw e.data.status;if("directLenders"in e){wi=e.sessionId;for(const t of e.directLenders)bi[t.id]={data:{lenderId:t.id,lenderName:t.name}};return e.directLenders}}))}))}));const Ai=()=>{Tt.log("disposing data",{function:"dispose",filename:"dispose.ts"}),Oi()},Ti=e=>{var t,n;if(Tt.log("learn more pressed",{function:"openLink",filename:"openLink",sku:e,widgetData:null==(t=bn.widgets)?void 0:t[e]}),e&&null!=(n=bn.widgets)&&null!=(n=n[e])&&null!=(n=n.widget)&&n.widgetFinancingPageUrl){var i;const t=bn.widgets[e];It.open(null==(i=t.widget)?void 0:i.widgetFinancingPageUrl,"_blank")}};function Si(){}function Ei(e,t){return function(e,t,n){if(n)return t?t(e()):e();try{var i=Promise.resolve(e());return t?i.then(t):i}catch(o){return Promise.reject(o)}}(e,Si,t)}const Pi=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(i){return Promise.reject(i)}}}((function(e){return bn.config=Object.assign({},bn.config,e),Ai(),Ei(Sn)}));const Li=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(i){return Promise.reject(i)}}}((function(){var e,t,n,i;return Tt.log("getting direct lenders for merchant",{filename:"getDirectLenders.ts",function:"getDirectLenders"}),t=ki(bn.config,null==(e=bn.basePromotionModalData)?void 0:e.configurationSessionId),n=function(e){for(const t of e)bn.widgets[t.id]={promotion:{lender:{id:t.id,name:t.name}}};return e},i?n?n(t):t:(t&&t.then||(t=Promise.resolve(t)),n?t.then(n):t)}));const _i="sdkInit";const Di=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(i){return Promise.reject(i)}}}((function(e){if(bn.isInitialized)Tt.warn("initializing SDK while already initialized",{function:"init",filename:_i,config:bn.config});else{var t,n,i;let o;if(bn.sdkInitializedPromise=new Promise((e=>{o=e})),Tt.browserSessionId=Qt.get,Tt.log("initializing SDK",{function:"init",filename:_i,config:bn.config}),!e||"string"!=typeof e.apiKey||!e.apiKey)return Tt.error(e?"invalid api key received":"config was not provided",{function:"init",filename:_i,printOriginalToConsole:!0,isSeverityWarn:!0});const r=Object.assign({},e,{browserSessionId:Qt.get,origin:null==(t=It.location)?void 0:t.origin,href:null==(n=It.location)?void 0:n.href});bn.config=r,bn.isInitialized=!0,yn(void 0,null==(i=bn.config.preferences)?void 0:i.language).then((()=>{null==o||o()})).catch((e=>{Tt.error("SDK failed to init widget with error",{function:"init",filename:_i,error:e,errorMessage:e.message}),null==o||o()})),null==bn.config.onLoaded||bn.config.onLoaded()}return s?r?r(o):o:(o&&o.then||(o=Promise.resolve(o)),r?o.then(r):o);var o,r,s}));const xi=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(i){return Promise.reject(i)}}}((function(e){return t=Ii({payload:{type:"identification-collection",payload:e},config:bn.config,isCheckout:!1}),n=function(e){if(e.status)throw e.status;return e.token},i?n?n(t):t:(t&&t.then||(t=Promise.resolve(t)),n?t.then(n):t);var t,n,i})),Ni=["callback","onDataUpdate","onConfirm","onApprovalStatusChange","onModalOpen","onApplicationCreated","widgetData"];const Mi="paymentsPresent",ji=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(i){return Promise.reject(i)}}}((function(e,t){void 0===t&&(t={});const n=Date.now(),i=t&&"apply"===e&&"applicationId"in t&&void 0!==t.applicationId&&null!==t.applicationId;if("object"!=typeof t||Array.isArray(t))return void Tt.error("invalid opt received, opt must be an object",{function:"paymentsPresent",filename:Mi,printOriginalToConsole:!0,opt:t});if(i&&Tt.warn("applicationId cannot be sent in apply",{filename:Mi,function:"applyPresent",printOriginalToConsole:!0,isConsoleOnly:!0}),t&&"checkout"===e&&!t.isCheckout&&(t.isCheckout=!0),"apply"!==e&&"modifyLoan"!==e&&"performAdditionalAction"!==e||!t||!t.isCheckout&&void 0!==t.isCheckout||(t.isCheckout=!1),((e,t)=>t&&"modifyLoan"===e)(e,t))t.intent={type:"ModifyLoan"};else if(((e,t)=>t&&"performAdditionalAction"===e)(e,t))t.intent={type:"ConsumerAdditionalAction"};else{var o;null!=(o=t.consumerDetails)&&o.mobilePhoneNumber&&(t.consumerDetails.mobilePhoneNumber=t.consumerDetails.mobilePhoneNumber.toString().replace(/\D/g,""))}if(!Kt(t))return;var r,s;"checkout"===e&&(r=t.cartDetails)&&(r.taxAmount=+(+r.taxAmount).toFixed(2),r.shippingAmount=+(+r.shippingAmount).toFixed(2),r.totalAmount=+(+r.totalAmount).toFixed(2),null==(s=r.discounts)||s.forEach((e=>{e.amount=+(+e.amount).toFixed(2)})),r.items.forEach((e=>{var t,n;e.price=+(+e.price).toFixed(2),e.warranty&&(e.warranty.price=+(null==(t=+(null==(n=e.warranty)?void 0:n.price))?void 0:t.toFixed(2)))})));const{onComplete:a}=bn.config,l=t,{callback:c,onDataUpdate:d,onConfirm:u,onApprovalStatusChange:f,onModalOpen:p,onApplicationCreated:g,widgetData:m}=l,h=_n(l,Ni),v=!!d,b=!!c||!!a,w=Object.assign({},h,{isUpdateCallBackProvided:v,isCallBackProvided:b},i&&{applicationId:void 0}),y=Object.assign({sendBrowserSessionStartedEvent:Qt.sendBrowserSessionStartedEvent,browserSessionIdTimestamp:Qt.timestamp,type:"payments",paymentsData:{opt:w},configurationSessionId:w.configurationSessionId,ttlStartTime:n},m&&{widget:{widgetData:m}});return I=Ii({config:bn.config,payload:y,isCheckout:"checkout"===e,merchantActions:{callback:c,onDataUpdate:d,onConfirm:u,onApprovalStatusChange:f,onModalOpen:p,onComplete:a,onApplicationCreated:g,onApplicationCreatedGlobal:bn.config.onApplicationCreated}}),C=function(e){return Qt.sendBrowserSessionStartedEvent=!1,e},O?C?C(I):I:(I&&I.then||(I=Promise.resolve(I)),C?I.then(C):I);var I,C,O}));const Ri="present";const Ui=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(i){return Promise.reject(i)}}}((function(e,t,n){var i,o,r,s;if(!bn.isInitialized)return Cn("present",Ri);switch(Tt.linkId=null==(i=bn.config)?void 0:i.linkId,"object"==typeof t&&"correlationId"in t&&t.correlationId&&(Tt.correlationId=t.correlationId),Tt.log(`about to present ${e}`,Object.assign({function:"present",filename:Ri,opt:t},n&&{flowType:n})),e){case"apply":case"checkout":return ji(e,t);case"promotion":return o=bn.sdkInitializedPromise,r=function(){if(n){const[e]=t.split("-lenderId-"),i=bn.widgets[e].widget;return ji(n,{widgetData:i})}return(e=>{var t,n;const i=Date.now(),[o,r]=e.split("-lenderId-"),s=null==(t=bn.widgets[o])?void 0:t.promotion;if(!s)return Tt.error(`SKU: ${o} is not exist, are you sure this is the correct SKU?`,{function:"promotionPresent",filename:"promotionsPresent",printOriginalToConsole:!0});const a={selectedLenderId:r,type:"promotions",widget:{widgetData:bn.widgets[o].widget},configurationSessionId:null==(n=bn.basePromotionModalData)?void 0:n.configurationSessionId,ttlStartTime:i,promotionData:Object.assign({},bn.basePromotionModalData,{promotion:s})};return Ii({payload:a,config:bn.config,isCheckout:!1,merchantActions:{onComplete:bn.config.onComplete}})})(t)},s?r?r(o):o:(o&&o.then||(o=Promise.resolve(o)),r?o.then(r):o);case"eligibility":{const{lenderId:e,container:n,callback:i,cartDetails:o,preferences:r}=t;return!!Ht(o,((e,t,n)=>{null==i||i(void 0,n)}))&&Ci({lenderId:e,container:n,cartDetails:o,callback:i,config:bn.config,preferences:r})}case"identification-collection":return xi(t);default:{const n={code:"CREATE_CHECKOUT_FAILED",message:`${e} type is not support`};return null!=t&&t.callback&&(null==t||null==t.callback||t.callback(void 0,void 0,n)),Tt.error(`${e} type is not support`,{filename:Ri,function:"present"}),{token:void 0,data:void 0,status:n}}}}));const $i="modifyLoan",Fi=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(i){return Promise.reject(i)}}}((function(e,t){var n;return bn.isInitialized?(Tt.linkId=null==(n=bn.config)?void 0:n.linkId,Tt.log("about to present ModifyLoan",{function:"modifyLoan",filename:$i,context:t}),ji("modifyLoan",Object.assign({},t,{sessionToken:e}))):Cn("modifyLoan",$i)}));const zi="performAdditionalAction",Bi=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(i){return Promise.reject(i)}}}((function(e,t){var n;return bn.isInitialized?(Tt.linkId=null==(n=bn.config)?void 0:n.linkId,Tt.log("about to present PerformAdditionalAction",{function:"performAdditionalAction",filename:zi}),ji("performAdditionalAction",Object.assign({},t,{sessionToken:e}))):Cn("performAdditionalAction",zi)}));const Wi="calculate";function qi(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(i){return Promise.reject(i)}}}const Hi=Pt(qi((function(e){if(!e)return void Tt.error("context is required",{filename:Wi,function:"calculate"});Tt.log("calculating promotions",{function:"calculate",filename:Wi,context:e});const{amount:t}=e;if(!t)return void Tt.error("amount is required",{function:"calculate",filename:Wi});const{apiKey:n,storeId:i,userId:o,merchantId:r}=bn.config;return s=un({apiKey:n,storeId:i,userId:o,merchantId:r}),a=function(n){if(n){const i=((e,{amount:t,lenderId:n})=>e.reduce(((e,i)=>{if(n&&i.lenderId!==n)return e;const o=i.promotions.filter((e=>{const n=null==e?void 0:e.eligibility,i=null==e?void 0:e.activation,o=null==e?void 0:e.terms,r=Date.now(),s="number"==typeof(null==n?void 0:n.maximumPurchaseAmount)&&n.maximumPurchaseAmount<Number(t),a="number"==typeof(null==n?void 0:n.minimumPurchaseAmount)&&n.minimumPurchaseAmount>Number(t),l=i&&(!(null!=i&&i.active)||(null==i?void 0:i.startDate)&&new Date(i.startDate).getTime()>r||(null==i?void 0:i.endDate)&&new Date(i.endDate).getTime()<r);return o&&!s&&!a&&!l}));return o.length>0&&e.push(Object.assign({},i,{promotions:o})),e}),[]))((null==n?void 0:n.providers)||[],e);return i.reduce(((e,n)=>{const i=n.lenderId,o=n.promotions.map((e=>{const{terms:n,disclosures:o,description:r}=e,s=(({amount:e,apr:t,numberOfPeriods:n})=>{let i="0";if(t>0){const o=t/100/12,r=o*Math.pow(1+o,n),s=Math.pow(1+o,n)-1;i=(Number(e)*(r/s)).toFixed(2)}else n>0&&(i=(Math.ceil(Number(e)/n*100)/100).toFixed(2));return Number(i)})(Object.assign({amount:t},n)),a="string"==typeof r&&r.replace("{TOTAL_PAYMENT_AMOUNT}",`${t}`).replace("{MONTHLY_PAYMENT_AMOUNT}",`${s}`),l=Object.entries(o||{}).reduce(((e,n)=>{const[i,o]=n,r=null==o?void 0:o.value.replace("{TOTAL_PAYMENT_AMOUNT}",`${t}`).replace("{MONTHLY_PAYMENT_AMOUNT}",`${s}`);return e[i]=Object.assign({},o,{value:r}),e}),{});return{lenderId:i,promotion:Object.assign({},n,r&&{description:a},{disclosures:l,monthlyPayment:s})}}));return[...e,...o]}),[])}return[]},l?a?a(s):s:(s&&s.then||(s=Promise.resolve(s)),a?s.then(a):s);var s,a,l})),500),Ki=qi((function(e){if(bn.isInitialized)return Hi(e);Cn("calculate",Wi)}));const Gi=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(i){return Promise.reject(i)}}}((function(){return{timestamp:Date.now(),active:Object.values(bi).some((e=>e.isPresenting))}}));var Vi;const Yi="sdk";function Xi(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(i){return Promise.reject(i)}}}const Ji=window;let Zi=!1,Qi=!1,eo=!1;const to={cfg:Ji.caConfig||(null==(Vi=Ji.ChargeAfter)?void 0:Vi.cfg),get payments(){return{present:Ui,modifyLoan:Fi,performAdditionalAction:Bi}},get promotions(){return{present:e=>Ui("promotion","string"==typeof e?e:e.sku||e.lenderId),openLink:Ti,update:Sn,calculate:Ki,apply:e=>Ui("promotion","string"==typeof e?e:e.sku||e.lenderId,"apply")}},get apply(){return Zi||(Tt.warn('The property "apply" is deprecated please use property "payments" instead and use "present("apply", opt)"',{function:"apply",filename:Yi,printOriginalToConsole:!0,isConsoleOnly:!0}),Zi=!0),{present:(e={})=>Ui("apply",Object.assign({},e,{isCheckout:!1}))}},get checkout(){return Qi||(Tt.warn('The property "checkout" is deprecated please use property "payments" instead and use "present("checkout", opt)"',{function:"checkout",filename:Yi,printOriginalToConsole:!0,isConsoleOnly:!0}),Qi=!0),{present:e=>Ui("checkout",Object.assign({},e,{isCheckout:!0}))}},get promotionalWidget(){const e=this;eo||(Tt.warn('The property "promotionalWidget" is deprecated please use property "promotions" instead',{function:"promotional",filename:Yi,printOriginalToConsole:!0,isConsoleOnly:!0}),eo=!0);const t=this.promotions;return Object.assign({},t,{update:(e,t)=>Sn(null==e?void 0:e.items,t),rebuild:function(){return function(e,t,n){if(n)return t?t(e()):e();try{var i=Promise.resolve(e());return t?i.then(t):i}catch(o){return Promise.reject(o)}}(Sn,(function(){var t;null==(t=e.cfg)||null==t.onLoaded||t.onLoaded()}))}})},get identification(){return{present:e=>Ui("identification-collection",e)}},getDirectLenders:Li,get eligibility(){return{createWidget:Xi((function(e){return Ui("eligibility",e),i?n?n(t):t:(t&&t.then||(t=Promise.resolve(t)),n?t.then(n):t);var t,n,i}))}},get poweredByLogo(){return`${kt.cdnUrl}/chargeafter/powered-by.svg`},get init(){return e=>(this.cfg=e,Di(e))},get updateConfig(){return e=>(this.cfg=Object.assign({},this.cfg,e),Pi(e))},get dispose(){return Ai},get heartbeat(){return Gi}};var no;const io=window,oo=to;let ro;var so,ao,lo;io.ChargeAfter&&(null!=(so=io.ChargeAfter)&&so.dispose&&(null==(ao=io.ChargeAfter)||ao.dispose()),ro=null==(lo=io.ChargeAfter)?void 0:lo.fraudDetection);const co=io.caConfig||(null==(no=io.ChargeAfter)?void 0:no.cfg);oo.fraudDetection=ro,io.ChargeAfter=oo,co&&oo.init(co)})()})();
//# sourceMappingURL=chargeafter.min.js.map