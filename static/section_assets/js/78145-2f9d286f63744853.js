!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="58b46605-965f-4e13-a35f-5e6484a4c415",e._sentryDebugIdIdentifier="sentry-dbid-58b46605-965f-4e13-a35f-5e6484a4c415")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[78145],{78145:function(e,s,t){"use strict";var i=t(85893),n=t(93967),o=t.n(n),a=t(49328),r=t.n(a),l=t(67294),c=t(50605),u=t(51577),d=t(36776),_=t(67469),m=t(83466),h=t(22690),b=t(97263),p=t(95557),g=t(83872),x=t(14727),v=t(13408),C=t(36808),S=t.n(C),f=t(99244),N=t(81550),I=t(87536),k=t(83999),y=t(36413),Y=t(65040);let L=["us","ca"];s.Z=e=>{var s,t,n,a,C,A,O,j;let{data:w,onClose:E,gs:M,locale:T,pageType:U="",currentStatus:G,setCurrentStatus:P,loadingColor:B="#ffffff",mainStyle:D={},mainStandard:Z=!1,autoSignUpSuccessCallBack:Q}=e,{registrationsModelStatus:V,registrationsDealsType:K,registrationsOptions:H}=(0,x.l8)(),{setHtmlRelativeLink:W}=(0,Y.D)(),[F,q]=(0,l.useState)(V||p.hY.MAIN),[J,z]=(0,l.useState)([]),[X,$]=(0,l.useState)(!1),[ee,es]=(0,l.useState)(""),[et,ei]=(0,l.useState)(""),[en,eo]=(0,l.useState)(""),[ea,er]=(0,l.useState)(""),[el,ec]=(0,l.useState)(""),[eu,ed]=(0,l.useState)(),e_={...r(),...M},[em,eh]=(0,l.useState)(!1),[eb,ep]=(0,l.useState)(""),[eg,ex]=(0,l.useState)(!0),{registrationsMain:ev}=w,[eC,eS]=(0,l.useState)(!0),ef=(0,l.useCallback)(()=>{let e=window.location.host.split(".");return location.href.includes("localhost")?"localhost":".".concat(e[1],".").concat(e[2])},[]),{register:eN,handleSubmit:eI,clearErrors:ek,formState:{errors:ey}}=(0,I.cI)({shouldFocusError:!1,defaultValues:{registrations:{email:ee}}}),eY=(0,l.useCallback)(e=>{ei(e),q(p.hY.QUICK_LOGIN),P(p.hY.QUICK_LOGIN)},[P]),eL=(0,l.useMemo)(()=>(0,p.PO)(T),[T]),eR=(0,l.useMemo)(()=>L.includes(T),[T]),eA=(0,l.useCallback)(e=>{q(p.hY.MAIN),P(p.hY.MAIN),es(e)},[P]),eO=(0,l.useCallback)(e=>{er(e),q(p.hY.REMAINDER),P(p.hY.REMAINDER)},[P]),ej=(0,l.useCallback)(e=>{eo(e),q(p.hY.PASSWORD_LOGIN),P(p.hY.PASSWORD_LOGIN)},[P]),ew=(0,l.useCallback)((e,s,t)=>{let{coupons:i}=e.data;z(i),ei(s),ed(t),q("us"===T?p.hY.SUBSCRIBE_SMS:p.hY.COUPONS),P("us"===T?p.hY.SUBSCRIBE_SMS:p.hY.COUPONS)},[T,P]),eE=(0,l.useCallback)((e,s)=>{ei(s),422===e.status&&(q(p.hY.QUICK_LOGIN),P(p.hY.QUICK_LOGIN))},[P]),eM=e=>{ei(e)},eT=(0,l.useCallback)((e,s)=>{let{coupons:t}=e.data;if(z(t),ei(s),null==H?void 0:H.memberRegistration){q(p.hY.AUTH_CODE),P(p.hY.AUTH_CODE);return}q("us"===T?p.hY.SUBSCRIBE_SMS:p.hY.COUPONS),P("us"===T?p.hY.SUBSCRIBE_SMS:p.hY.COUPONS),Q&&Q(e)},[T,null==H?void 0:H.memberRegistration,P,Q]),eU=(0,l.useCallback)((e,s)=>{ei(s),422===e.status&&(q(p.hY.QUICK_LOGIN),P(p.hY.QUICK_LOGIN))},[P]),eG=(0,l.useMemo)(()=>{var e;return(v.We[T||""]||T||(null==w?void 0:null===(e=w.globalCountry)||void 0===e?void 0:e.code)).toUpperCase()},[T,null==w?void 0:null===(s=w.globalCountry)||void 0===s?void 0:s.code]),eP=(0,l.useCallback)(async e=>{$(!0),ex(e);let{email:s,subscribe:t}=null==e?void 0:e.registrations,{register_source:i}=(0,y.m1)();try{var n,o,a,r,l;let e=await (0,f.Z)({action:"login",needRecaptcha:!0,locale:T,url:"/api/multipass/passport-api/auto-signup",method:"POST",body:{email:s,app:eL,country_code:eG,register_source:i,data:{redirect_url:"".concat(window.location.origin,"/").concat(T,"?ref=edm_member_activation")}},headers:{"User-Agent":null===(n=navigator)||void 0===n?void 0:n.userAgent}}).catch(e=>{$(!1)}),c=ef();if(e.status>100&&e.status<300){let{auth_token:n,canAutoSignup:u,active_token:d}=null==e?void 0:null===(o=e.data)||void 0===o?void 0:o.data;g.Z.registrationsTrack({action:"success",subscribe:t?1:0,email:s,deals_type:(null==ev?void 0:ev.deals_type)||(null==ev?void 0:ev.dealsType)||brandDealsType()});let _=btoa(n);if(eS(u),u){null===(a=localStorage)||void 0===a||a.setItem("b_auth_token",_);let n="".concat(v.n1,"/login?app=").concat(eL,"&t=").concat(_,"&redirect=").concat(encodeURIComponent(location.href));S().set("passport-login-url",n,{domain:c,expires:30});let o=(()=>{switch(U){case"powerStation":case"hes":return"anker_ankersolix";case"charger":return"anker_charging"}})(),u=await (0,f.Z)({action:"activity",needRecaptcha:!0,locale:T,url:"/api/multipass/rainbowbridge/activities",method:"POST",headers:{"X-Application-Name":"".concat(eL,"-shopify"),"x-application-token":null==e?void 0:null===(l=e.data)||void 0===l?void 0:null===(r=l.data)||void 0===r?void 0:r.auth_token},body:{email:s,register_source:i,shopify_domain:v.BR["".concat(T)],single_brand_subscribe:!0,genre:(null==ev?void 0:ev.deals_type)||(()=>{switch(U){case"powerStation":return"anker_powerhouse";case"charger":return"anker_charger";case"hes":return"anker_balcony";default:return"footer_sub"}})(),...(o||(null==ev?void 0:ev.sub_brand_type))&&{sub_brand_type:(null==ev?void 0:ev.sub_brand_type)||o},promise_subscribe:t}}).finally(()=>{$(!1)});!u.errors&&eT&&eT(u,s)}else eM&&eM(s),$(!1)}else $(!1),eh(!0),eU&&eU(e,s),422===e.status?eh(!1):ep((null==e?void 0:e.errors)||(null==e?void 0:e.error))}catch(e){$(!1),ep(e||"error")}},[T,eL,eG,ef,null==ev?void 0:ev.deals_type,null==ev?void 0:ev.dealsType,null==ev?void 0:ev.sub_brand_type,U,eT,eU]),eB=(0,l.useCallback)(async()=>{if(sendLoading)return;let e=await (0,f.Z)({locale:T,url:"/api/multipass/account/users/send_validation_email",method:"POST",body:{email:null==eg?void 0:eg.registrations,app:eL},needRecaptcha:!0,action:"user"}).catch(e=>{});e.status>100&&e.status<300&&onSendVerifyEmailSuccess&&onSendVerifyEmailSuccess()},[T,null==eg?void 0:eg.registrations,eL]),eD=(0,l.useCallback)(()=>{ek("registrations[email]"),eh(!1)},[ek]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:o()(M.rsm_close_mask,"!fixed",{hidden:F===p.hY.MAIN||G==p.hY.MAIN}),"aria-label":"mask"}),(null==ev?void 0:ev.registrations)?(0,i.jsxs)("div",{className:o()(e_.registrations_main,{[e_.disabled]:X}),children:[(null==ev?void 0:ev.subTitle)&&(0,i.jsx)("p",{className:e_.subScribe_content_subTitle,dangerouslySetInnerHTML:{__html:null==ev?void 0:ev.subTitle}}),(0,i.jsx)("h3",{className:e_.subScribe_content_title,dangerouslySetInnerHTML:{__html:null==ev?void 0:ev.title}}),(0,i.jsx)("p",{className:"mt-3 text-center text-base font-semibold leading-[1.4] text-[#fff]",dangerouslySetInnerHTML:{__html:null==ev?void 0:ev.subtitle}}),(0,i.jsx)("div",{className:"mt-[14px] min-md:mt-6 min-l:mt-8",children:(0,i.jsxs)("form",{method:"post",className:o()(e_.rsm_form,"w-[37.813%] mx-auto md:w-full"),acceptCharset:"UTF-8",onSubmit:eI(eP),children:[(0,i.jsxs)("div",{className:e_.input_box,children:[(0,i.jsx)("input",{className:o()(e_.rsm_input,e_.registrations_input_main,{[e_.input_error]:null==ey?void 0:null===(t=ey.registrations)||void 0===t?void 0:t.email}),name:"registrations[email]",onFocus:eD,maxLength:"200","aria-label":null==ev?void 0:ev.placeholder,placeholder:null==ev?void 0:ev.placeholder,...eN("registrations[email]",{required:null==ev?void 0:ev.info_fill_email,validate:e=>(0,k.G)(e)||(null==ev?void 0:ev.info_err_email)})}),X?(0,i.jsx)("div",{className:e_.subScribe_content_btn_box,children:(0,i.jsx)("button",{className:o()(e_.rsm_submit,e_.registrations_btn_main,e_.flex_center,e_.loading_btn),children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,i.jsx)("path",{d:"M1 10C1 14.9706 5.02944 19 10 19C14.9706 19 19 14.9706 19 10C19 5.02944 14.9706 1 10 1",stroke:B||"#fff",strokeWidth:"2",strokeLinecap:"round"})})})}):(0,i.jsx)(N.E.div,{className:e_.subScribe_content_btn_box,children:(0,i.jsx)(N.E.button,{layout:!0,type:"submit",className:o()(e_.subScribe_content_btn,e_.rsm_submit),children:(0,i.jsx)(N.E.p,{layout:!0,className:"absolute left-0 top-0 h-full w-full px-[16px] md:px-[14px]",dangerouslySetInnerHTML:{__html:null==ev?void 0:ev.register_text}})})})]}),(0,i.jsx)("p",{className:o()(e_.form_error_registrations,"text-center md:!mt-[16px]"),children:null==ey?void 0:null===(a=ey.registrations)||void 0===a?void 0:null===(n=a.email)||void 0===n?void 0:n.message}),(0,i.jsxs)("p",{className:o()(e_.rsm_policy_box,e_.checkout_box),children:[(0,i.jsx)("input",{className:o()(e_.rsm_checkout,e_.checkout),name:"registrations[policy]",type:"checkbox",defaultChecked:eR,"aria-label":"policy-checkbox",...eN("registrations[policy]",{required:null==ev?void 0:ev.info_select_policy})}),(0,i.jsx)("span",{dangerouslySetInnerHTML:{__html:W({html:null==ev?void 0:ev.policy_text,locale:T})},className:e_.rsm_checkout_text})]}),(0,i.jsx)("p",{className:e_.form_error_registrations,children:null==ey?void 0:null===(A=ey.registrations)||void 0===A?void 0:null===(C=A.policy)||void 0===C?void 0:C.message}),(0,i.jsxs)("p",{className:o()(e_.rsm_subscribe_box,e_.checkout_box),children:[(0,i.jsx)("input",{className:o()(e_.rsm_checkout,e_.checkout),name:"registrations[subscribe]",type:"checkbox",defaultChecked:eR,"aria-label":"subscribe-checkbox",...eN("registrations[subscribe]")}),(0,i.jsx)("span",{className:e_.rsm_checkout_text,children:ev.subscribe_text})]}),(0,i.jsx)("p",{className:e_.form_error_registrations,children:null==ey?void 0:null===(j=ey.registrations)||void 0===j?void 0:null===(O=j.subscribe)||void 0===O?void 0:O.info_select_policy}),!eC&&(0,i.jsxs)("p",{className:o()(e_.form_error_registrations,"rounded-[2px] bg-[rgba(248,77,79,0.08)] px-[12px] py-[10px]"),children:[(0,i.jsx)("span",{children:null==ev?void 0:ev.verifyError}),"\xa0",(0,i.jsx)("a",{onClick:eB,className:" cursor-pointer text-[#005D8E] underline",children:null==ev?void 0:ev.sendEmailText})]}),em&&(0,i.jsx)("p",{className:o()(e_.form_error_registrations,"rounded-[2px] bg-[rgba(248,77,79,0.08)] px-[12px] py-[10px]"),children:(0,i.jsx)("span",{children:null==ev?void 0:ev.serviceError})}),eb&&!em&&(0,i.jsx)("p",{className:o()(e_.form_error_registrations,"rounded-[2px] bg-[rgba(248,77,79,0.08)] px-[12px] py-[10px]"),children:(0,i.jsx)("span",{children:eb})})]})})]}):(0,i.jsx)(c.Z,{data:null==w?void 0:w.registrationsMain,gs:{...e_,...D},onSendVerifyEmailSuccess:()=>{ec("main"),q(p.hY.ACTIVATE),P(p.hY.ACTIVATE)},registrationsFillEmail:ee,onQuickLogin:eY,mainStandard:Z,onRegistrationsSuccess:ew,autoSignUpSuccessCallBack:Q,onRegistrationsError:eE,onRegistrationsVerify:e=>{ei(e)}}),(0,i.jsx)("modal",{className:o()(e_.registrations_model,{hidden:F===p.hY.MAIN||G==p.hY.MAIN}),"aria-labelledby":"registrations-model","aria-describedby":"registrations-model",children:(0,i.jsxs)("div",{className:e_.registrations_model_wrap,children:[(0,i.jsx)("button",{className:e_.rsm_close,children:(0,i.jsx)(R,{onClose:()=>{q(p.hY.MAIN),P(p.hY.MAIN),E(F)}})}),F===p.hY.QUICK_LOGIN&&(0,i.jsx)(u.Z,{fillEmail:et,data:null==w?void 0:w.registrationsQuickLogin,gs:e_,onPasswordLogin:ej,onQuickLoginSuccess:eO,onCreateAccount:eA,onQuickLoginBack:()=>{g.Z.backRegistrationsTrack({buttonName:"back"}),q(p.hY.MAIN),P(p.hY.MAIN),es(et)}}),F===p.hY.PASSWORD_LOGIN&&(0,i.jsx)(d.Z,{rsqlFillEmail:en,onPasswordLoginSuccess:()=>E(),data:null==w?void 0:w.registrationsPasswordLogin,gs:e_,onPasswordLoginBack:()=>{q(p.hY.QUICK_LOGIN),P(p.hY.QUICK_LOGIN)},onSendVerifyEmailSuccess:e=>{ei(e),ec("passwordLogin"),q(p.hY.ACTIVATE),P(p.hY.ACTIVATE)}}),F===p.hY.COUPONS&&(0,i.jsx)(_.Z,{data:null==w?void 0:w.registrationsCoupons,gs:e_,registerEmail:et,coupons:J,onCouponsGet:()=>{q(p.hY.MAIN),P(p.hY.MAIN),E(F)},onCouponsBack:()=>{q(p.hY.MAIN),P(p.hY.MAIN)}}),F===p.hY.REMAINDER&&(0,i.jsx)(m.Z,{data:null==w?void 0:w.registrationsRemainder,gs:e_,rsrFillEmail:ea,onReminderBack:()=>{ei(ea),es(""),q(p.hY.QUICK_LOGIN),P(p.hY.QUICK_LOGIN)},onReminderGet:()=>E()}),F===p.hY.SUBSCRIBE_SMS&&(0,i.jsx)(b.Z,{data:null==w?void 0:w.registrationsSubscribeSMS,gs:e_,subscribe:eu,registerEmail:et,onSubscribeSMSSkip:()=>{q(p.hY.COUPONS),P(p.hY.COUPONS)},onSubscribeSMSSuccess:()=>{q(p.hY.COUPONS),P(p.hY.COUPONS)},onActivateGet:()=>E()}),F===p.hY.ACTIVATE&&(0,i.jsx)(h.Z,{data:null==w?void 0:w.registrationsActivate,gs:e_,registerEmail:et,onActivateBack:()=>{q("main"===el?p.hY.MAIN:p.hY.PASSWORD_LOGIN),P("main"===el?p.hY.MAIN:p.hY.PASSWORD_LOGIN),es(et)},onActivateGet:()=>E()})]})})]})};let R=e=>{let{onClose:s}=e;return(0,i.jsx)("svg",{onClick:s,xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.8525 5.31015C16.4558 4.91337 15.8125 4.91338 15.4157 5.31015L11.1268 9.5991L6.83815 5.31049C6.44138 4.91372 5.79808 4.91372 5.40131 5.31049C5.00454 5.70726 5.00455 6.35055 5.40131 6.74732L9.68993 11.0359L5.40105 15.3248C5.00428 15.7216 5.00428 16.3649 5.40105 16.7616C5.79782 17.1584 6.44111 17.1584 6.83788 16.7616L11.1268 12.4728L15.416 16.762C15.8128 17.1588 16.456 17.1588 16.8528 16.762C17.2496 16.3652 17.2496 15.7219 16.8528 15.3252L12.5636 11.0359L16.8525 6.74698C17.2493 6.35021 17.2493 5.70692 16.8525 5.31015ZM16.921 6.02856C16.921 6.22992 16.8441 6.43127 16.6905 6.5849L14.465 8.8104L12.2395 11.0359L12.2395 11.0359L16.6905 6.58493C16.8441 6.43129 16.921 6.22993 16.921 6.02856ZM5.34966 6.19087C5.37992 6.3354 5.45115 6.47307 5.56336 6.58528L10.014 11.0359L10.014 11.0359L5.56336 6.58524C5.45116 6.47304 5.37992 6.33539 5.34966 6.19087ZM5.34682 16.1923C5.37547 16.3415 5.44757 16.484 5.56309 16.5996C5.87037 16.9068 6.36856 16.9068 6.67583 16.5996L11.1268 12.1486L15.578 16.5999C15.8853 16.9072 16.3835 16.9072 16.6908 16.5999C16.8462 16.4445 16.923 16.2402 16.9212 16.0365C16.923 16.2402 16.8462 16.4445 16.6908 16.5999C16.3835 16.9072 15.8853 16.9072 15.578 16.5999L11.1268 12.1487L6.67583 16.5996C6.36856 16.9069 5.87037 16.9069 5.56309 16.5996C5.44756 16.4841 5.37547 16.3415 5.34682 16.1923Z",fill:"#333333"})})}},49328:function(e){e.exports={registrations_model:"RegistrationsComponent_registrations_model__zYocI",rsm_close:"RegistrationsComponent_rsm_close__Npcr1",registrations_model_wrap:"RegistrationsComponent_registrations_model_wrap__0bOsA",registrations_input_main:"RegistrationsComponent_registrations_input_main__TT7gy",registrations_btn_main:"RegistrationsComponent_registrations_btn_main__JGL3n",input_box:"RegistrationsComponent_input_box__V09rY",form_error:"RegistrationsComponent_form_error__GzYGr",subScribe_content_btn:"RegistrationsComponent_subScribe_content_btn__Aew3T",subScribe_content_btn_box:"RegistrationsComponent_subScribe_content_btn_box__mvpC7",rsm_checkout_text:"RegistrationsComponent_rsm_checkout_text__V9JhW",form_error_registrations:"RegistrationsComponent_form_error_registrations__GpVqE",checkout_box:"RegistrationsComponent_checkout_box__pKk1l",flex_center:"RegistrationsComponent_flex_center__ORLtw",loading_btn:"RegistrationsComponent_loading_btn__aUoNh",rotate:"RegistrationsComponent_rotate__HaJSf"}}}]);