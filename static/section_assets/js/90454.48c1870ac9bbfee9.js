!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="d99ad8f8-d0d5-4d81-8dc0-39966a528420",e._sentryDebugIdIdentifier="sentry-dbid-d99ad8f8-d0d5-4d81-8dc0-39966a528420")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[90454],{90454:function(e,t,l){"use strict";var n=l(85893),i=l(67294),u=l(93967),a=l.n(u),o=l(37954),d=l.n(o),s=l(61203),r=l(73550),v=l(7613),c=l.n(v),m=l(14727),x=l(13459),p=l(53190),b=l(60245),f=l(3670),g=l(20354),_=l(28761);t.Z=e=>{var t,l,u,o,v,y,N,j,w,P;let{className:C,value:k,increase:B,decrease:q,detete:D,handleChange:E,availableForSale:Q,max:I,min:M=1,step:R=1,settings:A={},pId:S,s:Z={},cns:L={},skipDebounce:T,pageSource:U,infos:F,product:K={},shopCommon:V={},corporateData:z}=e,J={...c(),...Z},O=(0,i.useRef)();null==A||null===(t=A.infos)||void 0===t||t.stock;let{couponInListing:W,setLstingCouponData:X,inViewDom:G,setInViewData:H}=(0,m.l8)(),{profile:Y}=(0,f.Un)();I=Q?I<=0?(null==V?void 0:V.quantityMax)||9999:I:0;let{shop:$}=(0,r.aF)(),ee=null==$?void 0:$.orderLimits,et=null!==(w=null==ee?void 0:null===(l=ee.limits)||void 0===l?void 0:l["".concat(null==K?void 0:K.handle,",").concat(S)])&&void 0!==w?w:null==ee?void 0:null===(u=ee.limits)||void 0===u?void 0:u[S];M=(null==et?void 0:et.min)!==void 0&&(null==et?void 0:et.min)>=M?null==et?void 0:et.min:M>=(null==et?void 0:et.max)?null==et?void 0:et.max:M,I=(null==et?void 0:et.max)!==void 0&&(null==et?void 0:et.max)<=I?null==et?void 0:et.max:I;let[el,en]=(0,i.useState)(k<=M?M:k||1),ei=e=>{let t="string"==typeof e&&(null==e?void 0:e.replace(/\D/g,""));return Number((t>I?I:1*t)||M)},eu=(null==A?void 0:A.minBubbleText)||(null==ee?void 0:null===(o=ee.tips)||void 0===o?void 0:o.minBubbleText),ea=(null==A?void 0:A.maxBubbleText)||(null==ee?void 0:null===(v=ee.tips)||void 0===v?void 0:v.maxBubbleText),eo=(0,i.useCallback)(d()((e,t)=>{(0,s.RC)({event:"change_quantity",page_group:"Product Detail Page_"+S,action:e}),"Plus"===e?B&&B(t):q&&q(t)},500,{leading:!1}),[S,q,B]);(0,i.useEffect)(()=>{O.current.value=el},[el]),(0,i.useEffect)(()=>{en(k<=M?M:k>=I?I:k)},[k]);let ed=(0,i.useMemo)(()=>{var e,t;return null==K?void 0:null===(t=K.product)||void 0===t?void 0:null===(e=t.tags)||void 0===e?void 0:e.includes("hideChangeQuantity")},[K]),[es,er]=(0,i.useState)(null),ev=(0,i.useMemo)(()=>{let e=null==z?void 0:z.stages.length,t=null==z?void 0:z.stages.findIndex(e=>{var t;return k>=e.minNum&&k<=(null!==(t=e.maxNum)&&void 0!==t?t:1/0)});if(-1===t)return 0;{var l;let n=null==z?void 0:z.stages[t],i=(null==n?void 0:n.minNum)||50,u=null!==(l=null==n?void 0:n.maxNum)&&void 0!==l?l:i+1-(null==n?void 0:n.minNum);return(t+(k-(null==n?void 0:n.minNum))/u+.5)/e*100}},[null==z?void 0:z.stages,k]),ec=(0,_.kO)((null==K?void 0:K.handle)||"");return(null==z?void 0:z.minQuantityNumber)||null==z||null===(y=z.stages[0])||void 0===y||y.minNum,(0,n.jsxs)("div",{className:a()({invisible:null==K?void 0:null===(j=K.product)||void 0===j?void 0:null===(N=j.tags)||void 0===N?void 0:N.includes("worry_free_purchase")}),children:[(0,n.jsxs)("div",{className:a()(C,{[J.root]:!C},"flex flex-col items-start gap-[20px] l:gap-[8px]",{"gap-4 md:items-start min-md:!flex-row":"small_b"===U}),children:[(null==F?void 0:F.quantity_txt)&&(0,n.jsx)(x.Z,{className:"text-[20px] font-[700] text-[#1d1d1f] l:text-[18px]",html:null==F?void 0:F.quantity_txt}),(0,n.jsxs)("div",{className:a()(J.quantityBox,null==L?void 0:L.quantityBox),children:[(0,n.jsx)("button",{type:"button",disabled:ed,"aria-label":"decrease quantity",onClick:e=>{e.stopPropagation();let t=Number(el)-R,l=t-Number(k);if(D&&0===t)return D();0!==l&&t>=M&&(en(t),T?E(t,"Minus"):eo("Minus",l)),(0,s.RC)({event:"uaEvent",eventCategory:"bundle_color_engine",eventAction:S,eventLabel:"less",eventValue:t}),(0,s.RC)({event_parameters:null}),(0,s.RC)({event:"ga4Event",event_name:"bundle",event_parameters:{page_group:"Product Detail Page_"+S,position:"bundle_pla+filament",action:"color",SKU_variant:t}})},className:a()(J.actions,J.leftActions,{[J.buttonDisabled]:el<=M}),children:(0,n.jsx)(p.Z,{width:16,height:16,stroke:"#1d1d1f"})}),(0,n.jsx)("label",{className:J.inputBox,children:(0,n.jsx)("input",{tag:"Auto-10000423",ref:O,className:a()(J.input,L.input),disabled:R>1||ed,onKeyUp:e=>{""!==e.target.value&&(e.target.value=ei(e.target.value))},onBlur:e=>{let t=e.target.value,l=""===t||""!==t&&t<=M?M:t;e.target.value=l,en(ei(l)),E(ei(l),"Change")},type:"number",max:I,min:M})}),(0,n.jsx)("button",{type:"button",disabled:ed,"aria-label":"increase quantity",onClick:e=>{e.stopPropagation();let t=Number(el)+R,l=t-Number(k);0!==l&&t>=M&&t<=I&&(en(t),T?E(t,"Plus"):eo("Plus",l)),(0,s.RC)({event:"uaEvent",eventCategory:"bundle_color_engine",eventAction:S,eventLabel:"add",eventValue:t}),(0,s.RC)({event_parameters:null}),(0,s.RC)({event:"ga4Event",event_name:"bundle",event_parameters:{page_group:"Product Detail Page_"+S,position:"bundle_pla+filament",action:"color",SKU_variant:t}})},className:a()(J.actions,J.rightActions,{[J.buttonDisabled]:el>=I}),style:{marginLeft:"-1px"},children:(0,n.jsx)(b.Z,{stroke:el>=I?"#ccc":"#1d1d1f",width:16,height:16})})]}),z&&(null==Y?void 0:Y.memberType)!==g.d.PLUS&&!ec&&(0,n.jsxs)("div",{className:"mt-[20px] min-h-[92px] w-full overflow-scroll bg-[#fffbf3] p-4 md:w-full md-l:w-fit",children:[(0,n.jsx)("div",{className:"relative h-[12px] w-full rounded-[20px] bg-[#fff0d4]",style:{minWidth:"".concat((null==z?void 0:z.stages.length)*90,"px")},children:(0,n.jsx)("div",{className:a()("absolute left-0 top-0 h-full max-w-full rounded-[20px] bg-[#FF9900]"),style:{width:"".concat(ev,"%")}})}),(0,n.jsx)("div",{className:"relative -mt-[12px] flex flex-row justify-between gap-[16px]",children:(0,n.jsx)("div",{className:"flex flex-row text-center text-[14px] font-semibold w-full",children:null==z?void 0:null===(P=z.stages)||void 0===P?void 0:P.map((e,t)=>{var l;let i=k>=(null==e?void 0:e.minNum)&&k<=(null!==(l=null==e?void 0:e.maxNum)&&void 0!==l?l:1/0);return(0,n.jsxs)("div",{className:"flex flex-1 flex-col items-center gap-2.5 pt-[2px] text-[#86868C]",children:[(0,n.jsx)("span",{className:a()("size-[8px] rounded-full bg-[#ffe3b1]",i&&"!bg-white")}),(0,n.jsx)(x.Z,{html:null==e?void 0:e.text,className:a()("px-[4px] text-center text-[#86868C] font-[600] text-[12px] l:text-[12px]",i&&"!text-[#FF9900]")})]},e.text+t)})})})]})]}),el>1&&el>=I&&Q&&ea&&(0,n.jsx)(h,{text:null==ea?void 0:ea.replace("{max}",I),s:J}),el>1&&el<=M&&Q&&eu&&(0,n.jsx)(h,{text:null==eu?void 0:eu.replace("{min}",M),s:J})]})};let h=e=>{let{text:t,s:l}=e;return(0,n.jsx)(x.Z,{html:t,className:l.speechBubble,variant:"paragraph"})}},7613:function(e){e.exports={quantityBox:"ProductQuantity_quantityBox__LK71r",actions:"ProductQuantity_actions__mXSVJ",buttonDisabled:"ProductQuantity_buttonDisabled__6MtBM",inputBox:"ProductQuantity_inputBox__TrmUt",input:"ProductQuantity_input__6_j2l",speechBubble:"ProductQuantity_speechBubble__6tDSp",quickActions:"ProductQuantity_quickActions__ZEMNb",quickItem:"ProductQuantity_quickItem__k_qbB"}}}]);